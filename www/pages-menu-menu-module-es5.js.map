{"version":3,"sources":["webpack:///src/app/pages/menu/menu.page.html","webpack:///src/app/pages/menu/menu.module.ts","webpack:///src/app/pages/menu/menu.page.scss","webpack:///src/app/pages/menu/menu.page.ts"],"names":["routes","path","component","MenuPageModule","imports","forChild","declarations","MenuPage","transfer","spinnerDialog","file","fileOpener","navCtrl","authService","route","router","sessionService","streamingMedia","sanitizer","http","iab","alertService","adHTTP","document","platform","screenshot","menu","Array","data","days","meal_name","sample_data","meal1","meal2","queryParams","subscribe","params","getCurrentNavigation","extras","state","school","details","presentLoading","getMenu","m","day","meal_type","f","nodata","noMenu","dismiss","undefined","console","log","filter","el","push","day_name","break_name","days_of_the_week","onlyUnique","sort","a","b","indexOf","forEach","element","name","ii","length","meal_data","meal","jj","extn","ext","toLowerCase","MIMETypes","fileExtn","split","reverse","fileMIMEType","getMIMEtype","showOpenWithDialog","then","e","presentToast","save","success","error","fileName","filePath","is","documentsDirectory","dataDirectory","url","encodeURI","trans","create","download","entry","downUrl","toURL","open","text","substr","date","format","year","value","index","self","selector","template"],"mappings":"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","file":"pages-menu-menu-module-es5.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-buttons slot=\\\"start\\\" style=\\\"font-size: 14px;\\\">\\n            <ion-back-button text=\\\"\\\" icon=\\\"chevron-back\\\"></ion-back-button>MEALS MENU\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n    <div class=\\\"table_wrapper\\\">\\n        <p style=\\\"text-transform: capitalize; text-align: center;\\\">\\n            <b>{{school}} Meal Menu</b>\\n        </p>\\n        <div *ngIf=\\\"noMenu == false\\\">\\n            <table border=\\\"1\\\" width=100%>\\n                <tr width=\\\"100%\\\" style=\\\"font-weight: 400;\\\">\\n                    <th><b>DAYS</b></th>\\n                    <th *ngFor=\\\"let sd of sample_data; let i = index\\\">\\n\\n                        <b>{{sd.name}}</b>\\n                    </th>\\n                </tr>\\n                <tr *ngFor=\\\"let m of meal1; let i = index\\\">\\n                    <td>\\n                        {{days[i]}}\\n                    </td>\\n                    <td>\\n                        <div [innerHTML]=\\\"m.meal\\\"></div>\\n                    </td>\\n\\n                    <td>\\n                <tr *ngFor=\\\"let s of meal2; let k = index\\\">\\n                    <div *ngIf=\\\"s.day_name === days[i]\\\">\\n                        <div [innerHTML]=\\\"s.meal\\\"></div>\\n                    </div>\\n                </tr>\\n                </td>\\n\\n\\n                </tr>\\n\\n\\n            </table>\\n            <!-- <ion-button (click)=\\\"print()\\\" size=\\\"medium\\\"\\n                style=\\\"background-color: #397C49; border-radius: 4px; font-weight: 500; font-size: 16px; margin-left:auto; margin-right:auto; margin-bottom: 12px; width: 50%;\\\"\\n                expand=\\\"block\\\">Download Menu</ion-button> -->\\n        </div>\\n        <h6 *ngIf=\\\"noMenu == true\\\"><i>No meal menu</i></h6>\\n\\n    </div>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\nimport { IonicModule } from '@ionic/angular';\nimport { NgxSpinnerModule } from 'ngx-spinner';\nimport { MenuPage } from './menu.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MenuPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MatProgressSpinnerModule,\n    NgxSpinnerModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MenuPage]\n})\nexport class MenuPageModule {}\n","export default \"ion-content {\\n  font-size: 13px;\\n}\\nion-content table tr:nth-child(even) {\\n  background-color: #ddd;\\n}\\nion-content table th {\\n  background-color: #000;\\n  color: white;\\n}\\nion-content table th, ion-content table td {\\n  padding: 5px;\\n  text-align: left;\\n}\\nion-content .table_wrapper {\\n  display: block;\\n  overflow-x: auto;\\n  white-space: nowrap;\\n}\\nion-content h6 {\\n  text-align: center;\\n  color: #397C49;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rb2tvZGF2aWQvRG93bmxvYWRzL2VwL3NyYy9hcHAvcGFnZXMvbWVudS9tZW51LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvbWVudS9tZW51LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQW9CUSxlQUFBO0FDbEJSO0FEQVE7RUFBb0Isc0JBQUE7QUNHNUI7QURGUTtFQUNJLHNCQUFBO0VBQ0EsWUFBQTtBQ0laO0FERlU7RUFDRSxZQUFBO0VBQ0EsZ0JBQUE7QUNJWjtBRENRO0VBQ0ksY0FBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUNDWjtBREdBO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0FDREYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tZW51L21lbnUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnR7XG4gICAgdGFibGV7XG4gICAgICAgIHRyOm50aC1jaGlsZChldmVuKSB7YmFja2dyb3VuZC1jb2xvcjogI2RkZDt9ICAgIFxuICAgICAgICB0aCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aCwgdGQge1xuICAgICAgICAgICAgcGFkZGluZzogNXB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICAudGFibGVfd3JhcHBlcntcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBPeHlnZW4sIFVidW50dSwgQ2FudGFyZWxsLCAnT3BlbiBTYW5zJywgJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZjtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuaDZ7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICMzOTdDNDk7XG59XG4gICAgICAgIFxufVxuIiwiaW9uLWNvbnRlbnQge1xuICBmb250LXNpemU6IDEzcHg7XG59XG5pb24tY29udGVudCB0YWJsZSB0cjpudGgtY2hpbGQoZXZlbikge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkO1xufVxuaW9uLWNvbnRlbnQgdGFibGUgdGgge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICBjb2xvcjogd2hpdGU7XG59XG5pb24tY29udGVudCB0YWJsZSB0aCwgaW9uLWNvbnRlbnQgdGFibGUgdGQge1xuICBwYWRkaW5nOiA1cHg7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG59XG5pb24tY29udGVudCAudGFibGVfd3JhcHBlciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBvdmVyZmxvdy14OiBhdXRvO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuaW9uLWNvbnRlbnQgaDYge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGNvbG9yOiAjMzk3QzQ5O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { Platform, NavController, AlertController } from '@ionic/angular';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { SpinnerDialog } from '@ionic-native/spinner-dialog/ngx';\nimport * as moment from 'moment';\nimport { SessionService } from 'src/app/services/session.service';\nimport { StreamingMedia, StreamingVideoOptions } from '@ionic-native/streaming-media/ngx';\nimport { HttpClient } from '@angular/common/http';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nimport { AlertService } from 'src/app/services/alert.service';\nimport { HTTP, HTTPResponse } from '@ionic-native/http/ngx';\nimport { DocumentViewer, DocumentViewerOptions } from '@ionic-native/document-viewer/ngx';\nimport { Screenshot } from '@ionic-native/screenshot/ngx';\n\n\n\n@Component({\n    selector: 'app-menu ',\n    templateUrl: './menu.page.html',\n    styleUrls: ['./menu.page.scss'],\n})\nexport class MenuPage implements OnInit {\n\n    menu: any;\n    school: any;\n    data: any;\n    days: any;\n    meal_name: any;\n    sample_data: any;\n    meal1: any;\n    meal2: any;\n    noMenu: boolean;\n\n    private fileTransfer: FileTransferObject;\n\n\n    constructor(\n        private transfer: FileTransfer,\n        private spinnerDialog: SpinnerDialog,\n        private file: File,\n        private fileOpener: FileOpener,\n        private navCtrl: NavController,\n        private authService: AuthService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private sessionService: SessionService,\n        public streamingMedia: StreamingMedia,\n        public sanitizer: DomSanitizer,\n        private http: HttpClient,\n        private iab: InAppBrowser,\n        private alertService: AlertService,\n        private adHTTP: HTTP,\n        private document: DocumentViewer,\n        private platform: Platform,\n        private screenshot: Screenshot,\n        // private player: Player\n    ) {\n        this.menu = new Array();\n        this.data = new Array();\n        this.days = new Array();\n        this.meal_name = new Array();\n        this.sample_data = new Array();\n        this.meal1 = new Array();\n        this.meal2 = new Array();\n\n        this.route.queryParams.subscribe(params => {\n            if (this.router.getCurrentNavigation().extras.state) {\n                this.school = this.router.getCurrentNavigation().extras.state.details;\n            }\n        });\n    }\n\n    ngOnInit() {\n\n    }\n\n    async ionViewWillEnter() {\n        this.authService.presentLoading();\n        await this.authService.getMenu(this.school).subscribe(\n            m => {\n                \n                var day = [];\n                var meal_type = [];\n                let f = [];\n\n                this.data = m;\n                if(this.data.nodata){\n                    this.noMenu = true;\n                    this.authService.dismiss();\n                }else{\n                    this.authService.dismiss();\n                    this.noMenu = false;\n                }\n\n                this.menu = this.data.data.menu == undefined ? [] : this.data.data.menu;\n                console.log(\"menu>>>\", m);\n                this.days = this.menu.filter(el => {\n                    day.push(el.day_name);\n                    meal_type.push(el.break_name);\n                });\n                var days_of_the_week = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"];\n\n                this.days = day.filter(this.onlyUnique);\n                // console.log(this.days);\n                console.log(days_of_the_week);\n                this.days.sort(function (a, b) {\n                    return days_of_the_week.indexOf(a) - days_of_the_week.indexOf(b);\n                });\n\n                // console.log(\"formatted>>>\" + this.days);\n                this.meal_name = meal_type.filter(this.onlyUnique);\n\n                this.meal_name.forEach(element => {\n                    const name = element;\n                    f = [];\n                    for (var ii = 0; ii < this.menu.length; ii++) {\n\n                        // console.log(this.menu[ii])\n                        if (this.menu[ii].break_name == element) {\n                            f.push(this.menu[ii]);\n                        }\n                    }\n\n                    const meal_data = {\n                        name,\n                        meal: f.filter(this.onlyUnique)\n                    };\n\n                    this.sample_data.push(meal_data);\n\n                });\n\n                // console.log(this.sample_data);\n                for (var jj = 0; jj < this.sample_data.length; jj++) {\n\n                }\n                this.meal1 = this.sample_data[0].meal == undefined ? [] : this.sample_data[0].meal;\n                this.meal2 = this.sample_data[1].meal == undefined ? [] : this.sample_data[1].meal;\n\n            }\n        );\n    }\n\n    getMIMEtype(extn) {\n        let ext = extn.toLowerCase();\n        let MIMETypes = {\n            'txt': 'text/plain',\n            'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n            'doc': 'application/msword',\n            'pdf': 'application/pdf',\n            'jpg': 'image/jpeg',\n            'bmp': 'image/bmp',\n            'png': 'image/png',\n            'xls': 'application/vnd.ms-excel',\n            'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n            'rtf': 'application/rtf',\n            'ppt': 'application/vnd.ms-powerpoint',\n            'pptx': 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n            'flv': 'video/x-flv',\n            'mp4': 'video/mp4',\n            'm3u8': 'application/x-mpegURL',\n            'ts': 'video/MP2T',\n            '3gp': 'video/3gpp',\n            'mov': 'video/quicktime',\n            'avi': 'video/x-msvideo',\n            'wmv': 'video/x-ms-wmv'\n\n        }\n        return MIMETypes[ext];\n    }\n\n    open(file) {\n        this.authService.dismiss();\n        // this.spinnerDialog.hide();\n        const fileExtn = file.split('.').reverse()[0];\n        const fileMIMEType = this.getMIMEtype(fileExtn);\n        console.log(fileExtn, fileMIMEType, file);\n        this.fileOpener.showOpenWithDialog(file, fileMIMEType)\n            .then(() => console.log('File is opened'))\n            .catch(e => {\n                this.authService.dismiss();\n                this.alertService.presentToast(e);\n            });\n\n\n    }\n\n    print() {\n        this.screenshot.save('jpg', 80, 'myscreenshot.jpg').then((success) => {\n            console.log(success);\n        }).catch((error) => { console.log(error) });\n    }\n\n    async download(fileName, filePath) {\n        this.authService.presentLoading();\n        let path = null;\n        if (this.platform.is('ios')) {\n            path = this.file.documentsDirectory;\n        } else {\n            path = this.file.dataDirectory;\n        }\n        const url = encodeURI(filePath);\n\n        const trans = this.transfer.create();\n\n        trans.download(url, path + fileName, true).then(entry => {\n            let downUrl = entry.toURL();\n            this.authService.dismiss();\n            this.open(downUrl);\n            // this.document.viewDocument(url,'application/pdf',{});\n        });\n\n\n        // const reqOptions: any = {\n        //   method: 'get',\n        //   responseType: 'blob'\n        // };\n\n        // let res: HTTPResponse = await this.adHTTP.sendRequest(filePath, reqOptions);\n        // let blob: Blob = res.data;\n        // await this.file.writeFile(filePath, fileName, blob, { replace: true });\n    }\n\n    trunc(text) {\n        return text.length > 20 ? `${text.substr(0, 20)}...` : text;\n    }\n\n    formatdate(date) {\n        // console.log(date);\n        return moment(date).format('MMM D, YYYY');\n\n    }\n    filterdate(date) {\n        return moment(date).year;\n    }\n    onlyUnique(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n}\n"]}