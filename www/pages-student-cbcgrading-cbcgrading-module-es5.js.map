{"version":3,"sources":["webpack:///src/app/pages/student/cbcgrading/cbcgrading.page.html","webpack:///src/app/pages/student/cbcgrading/cbcgrading.module.ts","webpack:///src/app/pages/student/cbcgrading/cbcgrading.page.scss","webpack:///src/app/pages/student/cbcgrading/cbcgrading.page.ts"],"names":["routes","path","component","CbcGradingPageModule","imports","forChild","declarations","CbcGradingPage","transfer","spinnerDialog","file","iab","authService","route","fileOpener","router","http","env","alertService","session","hidden","options","location","clearcache","clearsessioncache","zoom","hardwareback","mediaPlaybackRequiresUserAction","shouldPauseOnSuspend","closebuttoncaption","disallowoverscroll","toolbar","enableViewportScale","allowInlineMediaPlayback","presentationstyle","fullscreen","reportcards","Array","exams","assessments","schoolInfo","examdata","term","Object","types","type","changes","term_id","terms","term_data","j","fake","class_history","report_cards","cbc_reports","cbcdata","reports","setTimeout","schoolDetails","examTypes","queryParams","subscribe","params","getCurrentNavigation","extras","state","student","details","console","log","tids","assets","student_image","school","url","cdn","sessionTimeOut","segment","checkFeed","then","feed","feedback","getSchool","data5","data","forEach","element","name","schoolLevel","value","highCards","student_id","cards","undefined","reverse","currentTerm","data2","schoolTerm","school_terms","JSON","stringify","ter_id","map","item","class_name","filter","index","self","indexOf","class_id","exam_mark_header","term_name","examsTypes","class_cat_id","data1","nodata","cbcreports","target","create","cbcreport","changeTermId","changeClassId","examMarks","assessment","data4","sort","a","b","cbc","prepare","$event","c_id","t","ts","t_id","$exam","header_two","$class","header_one","presentLoading","presentToast","dismiss","data3","e","push","exam_type","myArray","v","i","el","ty","x","c","m","k","length","mark","marks","change","document","getElementById","sid","file_name","middle_name","first_name","last_name","downloadUrl","replace","includes","download","extn","ext","toLowerCase","MIMETypes","fileExtn","split","fileMIMEType","getMIMEtype","showOpenWithDialog","fileName","filePath","encodeURI","fileTransfer","dataDirectory","entry","toURL","open","error","test","navigationExtras","navigate","date","format","selector","template"],"mappings":"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","file":"pages-student-cbcgrading-cbcgrading-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\" style=\\\"font-size: 14px;\\\">\\n      <ion-back-button text=\\\"\\\" icon=\\\"chevron-back\\\"></ion-back-button>CBC GRADES\\n    </ion-buttons>\\n    <!-- <ion-title style=\\\"font-size:14px;\\\">EXAMS & GRADES</ion-title> -->\\n  </ion-toolbar>\\n  <ion-item>\\n    <ion-avatar slot=\\\"start\\\" *ngIf=\\\"assets !==1\\\">\\n      <img src={{assets}}>\\n    </ion-avatar>\\n    <ion-avatar slot=\\\"start\\\" *ngIf=\\\"assets === 1\\\">\\n      <ion-icon size=\\\"32\\\" style=\\\"font-size: 2em\\\" name=\\\"happy-outline\\\"></ion-icon>\\n    </ion-avatar>\\n    <ion-label style=\\\"text-transform: uppercase;\\\">{{student.first_name}} {{student.middle_name}} {{student.last_name}}\\n    </ion-label>\\n  </ion-item>\\n\\n</ion-header>\\n<ion-content>\\n\\n  <div>\\n    <ion-list-header>\\n      <ion-button size=\\\"small\\\" style=\\\"color: black;\\\" disabled (click)=\\\"hide()\\\">Filter <ion-icon name=\\\"chevron-down\\\">\\n        </ion-icon>\\n      </ion-button>\\n    </ion-list-header>\\n    <div id=\\\"hid\\\" hidden style=\\\"padding-left: 8px; padding-right: 8px;\\\">\\n      <ion-item>\\n        <ion-label>Class</ion-label>\\n        <ion-select id=\\\"class\\\" cancelText=\\\"Cancel\\\" okText=\\\"Ok\\\" (ionChange)=\\\"classExamChange($event)\\\">\\n          <div *ngFor=\\\"let c of class_history\\\">\\n            <ion-select-option value=\\\"{{c}}\\\">{{c}}</ion-select-option>\\n          </div>\\n\\n        </ion-select>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label>Term</ion-label>\\n        <ion-select cancelText=\\\"Cancel\\\" okText=\\\"Ok\\\" (ionChange)=\\\"termExamChange($event)\\\">\\n          <div *ngFor=\\\"let t of terms\\\">\\n            <ion-select-option value=\\\"{{t.term_name}}\\\">{{t.term_name}}</ion-select-option>\\n          </div>\\n        </ion-select>\\n      </ion-item>\\n      <ion-item lines=\\\"none\\\">\\n        <ion-button slot=\\\"end\\\" color=\\\"dark\\\" (click)=\\\"filterExam()\\\">Filter</ion-button>\\n      </ion-item>\\n    </div>\\n    <ion-list *ngIf=\\\"cbc_reports.length === 0 && fake === 1\\\">\\n      <br>\\n      <ion-spinner name=\\\"lines-small\\\" style=\\\"text-align: center; margin-left: 50%; margin-right: 50%;\\\" color=\\\"primary\\\">\\n      </ion-spinner>\\n    </ion-list>\\n    <ion-list *ngIf=\\\"cbc_reports.length === 0 && fake === 0\\\">\\n      <ion-item>No cbc report cards for this student</ion-item>\\n    </ion-list>\\n\\n    <div *ngIf=\\\"cbc_reports.length > 0\\\">\\n      <div *ngFor=\\\"let cbc of cbc_reports; let i = index\\\">\\n        <div>\\n          <ion-item (click)=\\\"cbcClick(cbc)\\\" style=\\\"margin: 0px !important;\\\">\\n            <ion-col col-7 style=\\\" color: green; font-size: 12px; font-weight:500;\\\"><strong>Class Name</strong> <br>\\n              {{cbc.class_name}}\\n\\n            </ion-col>\\n            <ion-col col-3 style=\\\"text-align: center !important;\\\"><strong>Term</strong> <br> {{cbc.term_name}}</ion-col>\\n            <ion-col col-3 style=\\\"text-align: center !important;\\\"><strong>Exam</strong> <br> {{cbc.exam_type}}</ion-col>\\n\\n          </ion-item>\\n        </div>\\n      </div>\\n    </div>\\n\\n  </div>\\n\\n\\n  <ion-fab *ngIf=\\\"feedback === 'true'\\\" vertical=\\\"bottom\\\" (click)=\\\"addfeed()\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button color=\\\"tertiary\\\">\\n      <ion-icon name=\\\"chatbox-ellipses\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CbcGradingPage } from './cbcgrading.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CbcGradingPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CbcGradingPage]\n})\nexport class CbcGradingPageModule {}\n","export default \"ion-segment ion-label {\\n  color: white;\\n  text-transform: unset;\\n  font-size: 12px;\\n}\\n\\nion-segment ion-label {\\n  color: white;\\n  font-size: 12px;\\n}\\n\\nion-content {\\n  font-size: 12px;\\n}\\n\\nion-content ion-col {\\n  color: black;\\n  font-size: 12px;\\n}\\n\\nion-content .info {\\n  color: black;\\n  font-size: 12px;\\n}\\n\\n#class {\\n  max-width: 65% !important;\\n}\\n\\nion-select {\\n  width: 100%;\\n  justify-content: center;\\n}\\n\\n.center {\\n  text-align: right;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rb2tvZGF2aWQvRG93bmxvYWRzL2VwL3NyYy9hcHAvcGFnZXMvc3R1ZGVudC9jYmNncmFkaW5nL2NiY2dyYWRpbmcucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9zdHVkZW50L2NiY2dyYWRpbmcvY2JjZ3JhZGluZy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUk7RUFDSSxZQUFBO0VBQ0EscUJBQUE7RUFDQSxlQUFBO0FDRFI7O0FETUk7RUFDSSxZQUFBO0VBQ0EsZUFBQTtBQ0hSOztBRE1BO0VBQ0ksZUFBQTtBQ0hKOztBRElJO0VBQ0ksWUFBQTtFQUNBLGVBQUE7QUNGUjs7QURJSTtFQUNJLFlBQUE7RUFDQSxlQUFBO0FDRlI7O0FETUE7RUFDSSx5QkFBQTtBQ0hKOztBRE1BO0VBQ0ksV0FBQTtFQUNBLHVCQUFBO0FDSEo7O0FES0E7RUFDSSxpQkFBQTtBQ0ZKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc3R1ZGVudC9jYmNncmFkaW5nL2NiY2dyYWRpbmcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXNlZ21lbnR7XG4gICAgLy9jb2xvcjp3aGl0ZTtcbiAgICBpb24tbGFiZWx7XG4gICAgICAgIGNvbG9yOndoaXRlO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdW5zZXQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG59XG5pb24tc2VnbWVudHtcbiAgICAvL2NvbG9yOndoaXRlO1xuICAgIGlvbi1sYWJlbHtcbiAgICAgICAgY29sb3I6d2hpdGU7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG59XG5pb24tY29udGVudHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgaW9uLWNvbHtcbiAgICAgICAgY29sb3I6YmxhY2s7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG4gICAgLmluZm97XG4gICAgICAgIGNvbG9yOmJsYWNrO1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgfVxuXG59XG4jY2xhc3N7XG4gICAgbWF4LXdpZHRoOiA2NSUgIWltcG9ydGFudDtcblxufVxuaW9uLXNlbGVjdCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIH1cbi5jZW50ZXJ7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgLy8gY29sb3I6IHJnYigxMjYsIDcwLCA3MCk7XG4gICAgLy8gLy9hbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgLy8gZm9udC1zaXplOiAxNnB4O1xuICAgIC8vIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgXG59XG5cbiIsImlvbi1zZWdtZW50IGlvbi1sYWJlbCB7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgdGV4dC10cmFuc2Zvcm06IHVuc2V0O1xuICBmb250LXNpemU6IDEycHg7XG59XG5cbmlvbi1zZWdtZW50IGlvbi1sYWJlbCB7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiAxMnB4O1xufVxuXG5pb24tY29udGVudCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn1cbmlvbi1jb250ZW50IGlvbi1jb2wge1xuICBjb2xvcjogYmxhY2s7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn1cbmlvbi1jb250ZW50IC5pbmZvIHtcbiAgY29sb3I6IGJsYWNrO1xuICBmb250LXNpemU6IDEycHg7XG59XG5cbiNjbGFzcyB7XG4gIG1heC13aWR0aDogNjUlICFpbXBvcnRhbnQ7XG59XG5cbmlvbi1zZWxlY3Qge1xuICB3aWR0aDogMTAwJTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5jZW50ZXIge1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { InAppBrowser, InAppBrowserOptions } from '@ionic-native/in-app-browser/ngx';\nimport * as moment from 'moment';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { SpinnerDialog } from '@ionic-native/spinner-dialog/ngx';\nimport { SessionService } from 'src/app/services/session.service';\nimport { report } from 'process';\nimport { HttpClient } from '@angular/common/http';\nimport { EnvService } from 'src/app/services/env.service';\nimport { AlertService } from 'src/app/services/alert.service';\nimport * as _ from 'underscore';\nimport { element } from 'protractor';\nimport { newArray } from '@angular/compiler/src/util';\n\n@Component({\n  selector: 'app-cbcgrading',\n  templateUrl: './cbcgrading.page.html',\n  styleUrls: ['./cbcgrading.page.scss'],\n})\nexport class CbcGradingPage implements OnInit {\n  term_data: any;\n  header_one: any;\n  header_two: any;\n  ter_id: any;\n  data: any;\n  data1: any;\n  data2: any;\n  reportcards: any;\n  cbc_reports: any;\n  cbcdata: any;\n  types: any[];\n  changes: any[];\n  student: any;\n  school: any;\n  segment: any;\n  assets: any;\n  term: any;\n  data3: any;\n  data4: any;\n  assessments: any;\n  exams: any;\n  no_cards: any;\n  class_id: any;\n  schoolInfo: any;\n  data5: any;\n  schoolDetails: any;\n  schoolHeaders: any;\n  reportdata: any;\n  subjects: any;\n  examTypes: any[];\n  userinfo: any;\n  feedback: any;\n  students: any;\n  t_id: any;\n  terms: any;\n  examdata: any;\n  term_id: any;\n  type: any[];\n  url: any;\n  fake: any;\n  j: any;\n  c_id: any;\n  cdn: any;\n  class_history: any;\n  report_cards: any;\n  reports: any;\n  schoolLevel: any;\n  hidden: boolean = true;\n  exam_mark_header: any;\n  private fileTransfer: FileTransferObject;\n  options: InAppBrowserOptions = {\n    location: 'yes', // Or 'no'\n    hidden: 'no', // Or  'yes'\n    clearcache: 'yes',\n    clearsessioncache: 'yes',\n    zoom: 'yes',// Android only ,shows browser zoom controls\n    hardwareback: 'yes',\n    mediaPlaybackRequiresUserAction: 'no',\n    shouldPauseOnSuspend: 'no', // Android only\n    closebuttoncaption: 'Close', // iOS only\n    disallowoverscroll: 'no', // iOS only\n    toolbar: 'yes', // iOS only\n    enableViewportScale: 'no', // iOS only\n    allowInlineMediaPlayback: 'no', // iOS only\n    presentationstyle: 'pagesheet', // iOS only\n    fullscreen: 'yes', // Windows only\n  };\n  constructor(\n    private transfer: FileTransfer,\n    private spinnerDialog: SpinnerDialog,\n    private file: File,\n    private iab: InAppBrowser,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private fileOpener: FileOpener,\n    private router: Router,\n    private http: HttpClient,\n    private env: EnvService,\n    private alertService: AlertService,\n    private session: SessionService) {\n    this.reportcards = new Array();\n    this.exams = new Array();\n    this.assessments = new Array();\n    this.schoolInfo = new Array();\n    this.examdata = new Array();\n    this.term = new Object();\n    this.types = new Array();\n    this.type = new Array();\n    this.changes = new Array();\n    this.term_id = new Array();\n    this.terms = new Array();\n    this.term_data = new Array();\n    this.j = new Array();\n    this.fake = 1;\n    this.class_history = new Array();\n    this.report_cards = new Array();\n    this.cbc_reports = new Array();\n    this.cbcdata = new Array();\n    this.reports = new Array();\n    setTimeout(() => {\n      this.fake = 0;\n    }, 5000);\n    // this.getSesion();\n    this.schoolDetails = new Object();\n    this.examTypes = new Array();\n    this.route.queryParams.subscribe(params => {\n      if (this.router.getCurrentNavigation().extras.state) {\n        this.student = this.router.getCurrentNavigation().extras.state.details;\n        console.log(this.student)\n        // this.report_cards = this.router.getCurrentNavigation().extras.state.reports;\n        this.term_id = this.router.getCurrentNavigation().extras.state.tids;\n        this.assets = this.student.student_image === null ? 1 :\n          `https://${this.student.school}.eduweb.co.ke/assets/students/${this.student.student_image}`;\n        this.url = `https://${this.student.school}.eduweb.co.ke/assets/students/`;\n\n        this.cdn = `https://${this.student.school}.eduweb.co.ke/assets/reportcards/${this.student.school}/`\n      }\n      this.session.sessionTimeOut();\n\n\n    });\n\n    this.segment = 'reports';\n\n\n\n  }\n\n  ngOnInit() {\n  }\n\n  async ionViewWillEnter() {\n\n\n    await this.authService.checkFeed().then(\n      feed => {\n        this.feedback = feed;\n      }\n    );\n    await this.authService.getSchool(this.student.school).subscribe(\n      school => {\n        this.data5 = school;\n        this.schoolInfo = this.data5.data;\n        this.schoolInfo.forEach(element => {\n          if (element.name == 'School Level') {\n            this.schoolLevel = element.value;\n          }\n        })\n      }\n    );\n    setTimeout(() => {\n      if (this.schoolLevel === 'Secondary') {\n        this.authService.highCards(this.student.school, this.student.student_id).subscribe(\n          cards => {\n            this.data = cards;\n            console.log(this.data)\n            this.report_cards = this.data.data === undefined ? [] : this.data.data;\n            this.report_cards = _.sortBy(this.report_cards, 'term_id').reverse();\n\n          }\n        );\n\n      } else if (this.schoolLevel === 'Primary') {\n        this.authService.cards(this.student.school, this.student.student_id).subscribe(\n          cards => {\n            this.data = cards;\n            this.report_cards = this.data.data === undefined ? [] : this.data.data;\n            this.report_cards = _.sortBy(this.report_cards, 'term_id').reverse();\n\n          }\n        );\n      }\n    }, 3000);\n\n    await this.authService.currentTerm(this.student.school).subscribe(\n      terms => {\n        this.data2 = terms;\n        this.term = this.data2.data;\n      }\n    );\n    await this.authService.schoolTerm(this.student.school, this.student.student_id).subscribe(\n      school_terms => {\n      console.log(\"schoool terms>> \"+JSON.stringify(school_terms));\n        this.term_data = school_terms;\n        this.terms = this.term_data.data;\n\n        this.ter_id = this.terms[0].term_id;\n        this.class_history = this.terms.map(item => item.class_name).filter((value, index, self) => self.indexOf(value) === index);\n        console.log(JSON.stringify(this.class_history))\n        this.class_id = this.terms[0].class_id;\n        this.exam_mark_header = this.terms[0].class_name + this.terms[0].term_name;\n      }\n    );\n   \n    await this.authService.examsTypes(this.student.school, this.student.class_cat_id).subscribe(\n      types => {\n        this.data1 = types;\n        if (this.data1.nodata) {\n          this.types = [];\n        } else {\n          this.types = this.data1.data;\n        }\n      }\n    );\n\n    this.cbcreports();\n  }\n\n\n\n  view1(file) {\n    let target = '_blank';\n    this.iab.create(file, target, this.options);\n\n  }\n\n  async cbcreports(){\n    //TODO: hit endpoint\n\n    await this.authService.cbcreport(this.student.school,this.student.student_id).subscribe(\n      cbcreports => {\n        this.cbcdata = cbcreports;\n        this.cbc_reports = this.cbcdata.data == undefined ? [] : this.cbcdata.data;\n\n      }\n    )\n\n  }\n\n  async calChange() {\n\n    var data;\n    var changeTermId = this.terms[1].term_id;\n    var changeClassId = this.terms[1].class_id;\n\n    await this.authService.exams(this.student.school, changeClassId, this.student.student_id, changeTermId).subscribe(\n      exams => {\n        data = exams;\n        var examMarks = data.data === undefined ? [] : data.data;\n        this.changes = examMarks;\n      });\n\n\n  }\n\n  onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n\n  async assessment() {\n    await this.authService.assessment(this.student.school, this.student.student_id).subscribe(\n      assessments => {\n        // console.log(homeworks.data);\n        this.data4 = assessments;\n        if (this.data4.nodata) {\n          this.assessments = [];\n        } else {\n          const data1 = this.data4.data === undefined ? [] : this.data4.data;\n          data1.sort((a, b) => (a.term_id < b.term_id) ? 1 : -1);\n          const data = data1;\n          this.assessments = data;\n        }\n        // console.log(JSON.stringify(this.assessments));\n\n      }\n    );\n  }\n\n  \n  cbcClick(cbc){\n    this.prepare(cbc.term_id);\n      // const navigationExtras: NavigationExtras = {\n      //   state: {\n      //     details: this.student,\n      //     examTypes: this.types,\n      //     schoolInfo: this.schoolInfo,\n      //     type:\"cbc\",\n      //     reports: cbc,\n      //     level: this.schoolLevel\n      //   }\n      // };\n      // this.router.navigate(['grades'], navigationExtras);\n    \n  }\n\n  //class change\n  classChange($event) {\n    this.c_id = $event.target.value;\n    if (this.c_id === \"all\") {\n      this.terms = this.term_data.data;\n    } else {\n      this.terms = this.term_data.data;\n      this.terms = this.terms.filter(t => {\n        var ts = [];\n        ts = t.class_name;\n        return ts == this.c_id;\n      });\n    }\n  }\n  //term change\n  termChange($event) {\n    this.t_id = $event.target.value;\n  }\n\n  //termExamChange($exam)\n  termExamChange($exam) {\n    this.ter_id = $exam.target.value;\n    this.header_two = this.ter_id;\n    this.terms.filter(t => {\n      var term = [];\n      term = t.term_name;\n      if (term === this.ter_id) {\n        this.ter_id = t.term_id;\n      }\n    });\n  }\n\n  //classExamChange\n  classExamChange($class) {\n\n    //value is class name\n    var value = $class.target.value;\n\n    this.header_one = value;\n\n    //re init terms for after filter click\n    this.terms = this.term_data.data;\n    console.log(this.terms)\n\n    //filter terms to have only those of selected class\n    this.terms = this.terms.filter(t => {\n      var class_name;\n      class_name = t.class_name;\n      if (class_name === value) {\n        this.class_id = t.class_id;\n        return t.class_id == this.class_id;\n      }\n    });\n    console.log(this.class_id)\n    console.log(this.terms);\n\n\n  }\n  //filter\n  filter() {\n    this.report_cards = this.data.data === undefined ? [] : this.data.data;\n    this.report_cards = this.report_cards.filter(reports => {\n      var j = [];\n      j = reports.term_id;\n      return j == this.t_id;\n    });\n\n  }\n  //filterExam \n  async filterExam() {\n    this.authService.presentLoading();\n    this.examdata = [];\n    this.exam_mark_header = \"\";\n    await this.authService.exams(this.student.school, this.class_id, this.student.student_id, this.ter_id).subscribe(\n      exams => {\n        this.data1 = exams;\n        if (this.data1.nodata) {\n          this.alertService.presentToast(\"No exam marks for term selected\");\n          this.cbc_reports = [];\n          this.authService.dismiss();\n        } else {\n          this.data3 = exams;\n          this.exams = this.data3.data === undefined ? [] : this.data3.data;\n          // this.exams.sort((a, b) => (a.exam_type > b.exam_type) ? 1 : -1);\n          this.exams.forEach(e => {\n            this.type.push(e.exam_type);\n          });\n          // console.log(this.type);\n          const myArray = this.type;\n          this.types = myArray.filter((v, i, a) => a.indexOf(v) === i);\n\n          this.types.forEach(el => {\n            console.log\n            const ty = el;\n            let x = [];\n            let c = [];\n            var m, k;\n            for (var i = 0; i < this.exams.length; i++) {\n              if (this.exams[i].exam_type === el) {\n                k = this.exams[i-1] === undefined ? 0 : this.exams[i-1].mark;\n                m = this.exams[i].mark-k;\n                x.push(this.exams[i]);\n                c.push(m);\n              }\n            }\n            const data = {\n              ty,\n              marks: x,\n              change: c\n            };\n            this.examdata.push(data);\n            this.authService.dismiss();\n          });\n\n        }\n      }\n    );\n    this.exam_mark_header = this.header_one + ' ' + this.header_two;\n\n  }\n  // hide\n  hide() {\n    if (this.hidden == true) {\n      document.getElementById('hid').hidden = false;\n      this.hidden = false\n    } else {\n      document.getElementById('hid').hidden = true;\n      this.hidden = true;\n      this.report_cards = this.data.data === undefined ? [] : this.data.data;\n    }\n\n  }\n  //prepare document for download\n  prepare(sid: any) {\n    var file_name: any;\n    if (this.student.middle_name != null) {\n      file_name = this.student.student_id + '_' + this.student.school + '_' + this.student.first_name + '_' + this.student.middle_name + '_' + this.student.last_name + '_' + sid + '.pdf';\n    } else {\n      file_name = this.student.student_id + '_' + this.student.school + '_' + this.student.first_name + '__' + this.student.last_name + '_' + sid + '.pdf';\n    }\n    console.log(file_name);\n    var downloadUrl = (this.cdn + file_name.replace(/\\s/g, \"_\"));\n\n    if (downloadUrl.includes(\"'\")) {\n      downloadUrl = downloadUrl.replace(/'/g, \"''\");\n    }\n    console.log(downloadUrl);\n    this.download(file_name, downloadUrl);\n  }\n\n\n  getMIMEtype(extn) {\n    let ext = extn.toLowerCase();\n    let MIMETypes = {\n      'txt': 'text/plain',\n      'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'doc': 'application/msword',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'bmp': 'image/bmp',\n      'png': 'image/png',\n      'xls': 'application/vnd.ms-excel',\n      'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'rtf': 'application/rtf',\n      'ppt': 'application/vnd.ms-powerpoint',\n      'pptx': 'application/vnd.openxmlformats-officedocument.presentationml.presentation'\n    }\n    return MIMETypes[ext];\n  }\n  open(file) {\n    this.authService.dismiss();\n    // this.spinnerDialog.hide();\n    const fileExtn = file.split('.').reverse()[0];\n    const fileMIMEType = this.getMIMEtype(fileExtn);\n    console.log(fileExtn, fileMIMEType, file);\n    this.fileOpener.showOpenWithDialog(file, fileMIMEType)\n      .then(() => console.log('File is opened'))\n      .catch(e => {\n        this.alertService.presentToast(e);\n      });\n  }\n  async download(fileName, filePath) {\n    await this.authService.presentLoading();\n    // this.spinnerDialog.show();\n    // const  fileExtn = fileName.split('.').reverse()[0];\n    // const fileMIMEType = this.getMIMEtype(fileExtn);\n    const url = encodeURI(filePath);\n    this.fileTransfer = this.transfer.create();\n    this.fileTransfer.download(url, this.file.dataDirectory + fileName, true).then((entry) => {\n      // here logging our success downloaded file path in mobile.\n      console.log('download completed: ' + entry.toURL());\n      // open downloaded file\n      // this.downloadFile = entry.toURL();\n      this.open(entry.toURL());\n    }).catch((error) => {\n      this.authService.dismiss();\n      // this.spinnerDialog.hide();\n      // here logging an error.\n      if (/\\s/.test(fileName)) {\n        this.alertService.presentToast('Download failed: File Name has spaces');\n      }\n      this.alertService.presentToast('Download failed: File not found');\n      console.log('download failed: ' + JSON.stringify(error));\n    });\n  }\n\n  //add feed\n  addfeed() {\n    const navigationExtras: NavigationExtras = {};\n    this.router.navigate(['feedback'], navigationExtras);\n  }\n\n  format(date) {\n    return moment(date).format('DD-MM-YYYY');\n  }\n\n}\n"]}