function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{qUUn:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("3Pt+"),a=n("tyNb"),r=n("TEn/"),s=n("tk/3"),c=n("mrSG"),l=n("lGQG"),d=n("te5A"),p=n("B7Rs"),m=n("FAH8"),u=n("9HCY"),f=n("wd/R"),v=n("IfdK"),h=n("RU0F"),g=n("m/P+"),w=n("3LUQ"),x=n("XSEc"),b=n("LfQc"),y=n("fXoL"),I=n("jhN1");function C(e,t){if(1&e&&(y["\u0275\u0275elementStart"](0,"div"),y["\u0275\u0275elementStart"](1,"ion-card-content"),y["\u0275\u0275element"](2,"div",7),y["\u0275\u0275element"](3,"br"),y["\u0275\u0275elementStart"](4,"div"),y["\u0275\u0275element"](5,"div",7),y["\u0275\u0275elementEnd"](),y["\u0275\u0275element"](6,"br"),y["\u0275\u0275elementStart"](7,"p"),y["\u0275\u0275text"](8),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()),2&e){var n=y["\u0275\u0275nextContext"]();y["\u0275\u0275advance"](2),y["\u0275\u0275property"]("innerHTML",n.newsinfo.subject,y["\u0275\u0275sanitizeHtml"]),y["\u0275\u0275advance"](3),y["\u0275\u0275property"]("innerHTML",n.newsinfo.message,y["\u0275\u0275sanitizeHtml"]),y["\u0275\u0275advance"](3),y["\u0275\u0275textInterpolate2"]("Posted By ",n.newsinfo.posted_by,", ",n.formatdate(n.newsinfo.creation_date),"")}}function j(e,t){if(1&e&&(y["\u0275\u0275elementStart"](0,"ion-card-content"),y["\u0275\u0275element"](1,"div",7),y["\u0275\u0275element"](2,"br"),y["\u0275\u0275elementStart"](3,"p"),y["\u0275\u0275text"](4),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()),2&e){var n=y["\u0275\u0275nextContext"]();y["\u0275\u0275advance"](1),y["\u0275\u0275property"]("innerHTML",n.newsinfo.message,y["\u0275\u0275sanitizeHtml"]),y["\u0275\u0275advance"](3),y["\u0275\u0275textInterpolate2"]("Posted By ",n.newsinfo.posted_by,", ",n.formatdate(n.newsinfo.creation_date),"")}}function S(e,t){if(1&e){var n=y["\u0275\u0275getCurrentView"]();y["\u0275\u0275elementStart"](0,"ion-list"),y["\u0275\u0275elementStart"](1,"ion-item",10),y["\u0275\u0275listener"]("click",(function(){y["\u0275\u0275restoreView"](n);var e=t.$implicit,i=y["\u0275\u0275nextContext"](2);return i.download(e,i.assets+e)})),y["\u0275\u0275elementStart"](2,"span"),y["\u0275\u0275text"](3),y["\u0275\u0275element"](4,"ion-icon",11),y["\u0275\u0275elementStart"](5,"a",12),y["\u0275\u0275text"](6),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=t.index;y["\u0275\u0275advance"](3),y["\u0275\u0275textInterpolate1"](" ",o+1,". "),y["\u0275\u0275advance"](3),y["\u0275\u0275textInterpolate1"](" ",i," ")}}function M(e,t){if(1&e&&(y["\u0275\u0275elementStart"](0,"div",8),y["\u0275\u0275template"](1,S,7,2,"ion-list",9),y["\u0275\u0275elementEnd"]()),2&e){var n=y["\u0275\u0275nextContext"]();y["\u0275\u0275advance"](1),y["\u0275\u0275property"]("ngForOf",n.attachments)}}var E,_=((E=function(){function e(t,n,i,o,a,r,s,c,l,d,p,m,u,f,v,h,g){var w=this;_classCallCheck(this,e),this.transfer=t,this.spinnerDialog=n,this.file=i,this.fileOpener=o,this.navCtrl=a,this.authService=r,this.route=s,this.router=c,this.sessionService=l,this.streamingMedia=d,this.sanitizer=p,this.http=m,this.iab=u,this.alertService=f,this.adHTTP=v,this.document=h,this.platform=g,this.newsinfo=new Object,this.sessionService.sessionTimeOut(),this.route.queryParams.subscribe((function(e){if(w.router.getCurrentNavigation().extras.state)if(w.newsinfo=w.router.getCurrentNavigation().extras.state.details,w.school=w.router.getCurrentNavigation().extras.state.school,w.student_id=w.router.getCurrentNavigation().extras.state.student_id,null==w.newsinfo)w.navCtrl.navigateRoot("/dashboard");else{var t=w.newsinfo.attachment?w.newsinfo.attachment:null,n=null===t?"":t,i=null===n?null:n.split(",");w.attachments=""!==i[0]?i:[],console.log("here"+JSON.stringify(w.newsinfo)),w.assets="https://".concat(w.school,".eduweb.co.ke/assets/posts/")}}))}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("student id "+this.student_id),this.http.get("https://api.eduweb.co.ke/getParticularCommunication/".concat(this.school,"/").concat(this.student_id,"/").concat(this.newsinfo.com_id)).subscribe((function(e){console.log(e)}))}},{key:"getMIMEtype",value:function(e){return{txt:"text/plain",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",doc:"application/msword",pdf:"application/pdf",jpg:"image/jpeg",bmp:"image/bmp",png:"image/png",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",rtf:"application/rtf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",flv:"video/x-flv",mp4:"video/mp4",m3u8:"application/x-mpegURL",ts:"video/MP2T","3gp":"video/3gpp",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv"}[e.toLowerCase()]}},{key:"open",value:function(e){var t=this;this.authService.dismiss();var n=e.split(".").reverse()[0],i=this.getMIMEtype(n);console.log(n,i,e),this.fileOpener.showOpenWithDialog(e,i).then((function(){return console.log("File is opened")})).catch((function(e){t.authService.dismiss(),t.alertService.presentToast(e)}))}},{key:"download",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,a=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.authService.presentLoading(),i=this.platform.is("ios")?this.file.documentsDirectory:this.file.dataDirectory,o=encodeURI(t),this.transfer.create().download(o,i+e,!0).then((function(e){var t=e.toURL();a.authService.dismiss(),a.open(t)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"openFileHandler",value:function(){this.fileOpener.open(this.downloadFile,"").then((function(){return console.log("File is opened")})).catch((function(e){return console.log("Error opening file",e)}))}},{key:"trunc",value:function(e){return e.length>20?"".concat(e.substr(0,20),"..."):e}},{key:"formatdate",value:function(e){return f(e).format("MMM D, YYYY")}},{key:"filterdate",value:function(e){return f(e).year}}]),e}()).\u0275fac=function(e){return new(e||E)(y["\u0275\u0275directiveInject"](p.a),y["\u0275\u0275directiveInject"](u.a),y["\u0275\u0275directiveInject"](m.a),y["\u0275\u0275directiveInject"](d.a),y["\u0275\u0275directiveInject"](r.R),y["\u0275\u0275directiveInject"](l.a),y["\u0275\u0275directiveInject"](a.a),y["\u0275\u0275directiveInject"](a.g),y["\u0275\u0275directiveInject"](v.a),y["\u0275\u0275directiveInject"](h.a),y["\u0275\u0275directiveInject"](I.DomSanitizer),y["\u0275\u0275directiveInject"](s.a),y["\u0275\u0275directiveInject"](g.a),y["\u0275\u0275directiveInject"](w.a),y["\u0275\u0275directiveInject"](x.a),y["\u0275\u0275directiveInject"](b.a),y["\u0275\u0275directiveInject"](r.T))},E.\u0275cmp=y["\u0275\u0275defineComponent"]({type:E,selectors:[["app-news"]],decls:12,vars:3,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],[1,"ion-no-padding"],[4,"ngIf","ngIfElse"],["no_subject",""],["class","ion-padding",4,"ngIf"],[3,"innerHTML"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["no-padding","",2,"font-size","14px","color","blue","border-bottom","blue 1px !important",3,"click"],["name","document-attach","md","md-attach"],[2,"color","blue","font-size","13px","text-align","center"]],template:function(e,t){if(1&e&&(y["\u0275\u0275elementStart"](0,"ion-header"),y["\u0275\u0275elementStart"](1,"ion-toolbar",0),y["\u0275\u0275elementStart"](2,"ion-buttons",1),y["\u0275\u0275element"](3,"ion-back-button",2),y["\u0275\u0275text"](4,"MORE INFORMATION "),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](5,"ion-content",3),y["\u0275\u0275elementStart"](6,"ion-card"),y["\u0275\u0275element"](7,"ion-card-header"),y["\u0275\u0275template"](8,C,9,4,"div",4),y["\u0275\u0275template"](9,j,5,3,"ng-template",null,5,y["\u0275\u0275templateRefExtractor"]),y["\u0275\u0275elementEnd"](),y["\u0275\u0275template"](11,M,2,1,"div",6),y["\u0275\u0275elementEnd"]()),2&e){var n=y["\u0275\u0275reference"](10);y["\u0275\u0275advance"](8),y["\u0275\u0275property"]("ngIf",t.newsinfo.subject!==t.newsinfo.message)("ngIfElse",n),y["\u0275\u0275advance"](3),y["\u0275\u0275property"]("ngIf",t.attachments.length>0)}},directives:[r.q,r.L,r.g,r.d,r.e,r.l,r.h,r.j,i.i,r.i,i.h,r.v,r.t,r.r],styles:["ion-content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{color:#000}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:link{color:#00f}a[_ngcontent-%COMP%]:visited{color:#999}a[_ngcontent-%COMP%]:hover{color:#2b5aa1}"]}),E);n.d(t,"NewsPageModule",(function(){return P}));var k,O=[{path:"",component:_}],P=((k=function e(){_classCallCheck(this,e)}).\u0275mod=y["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=y["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},imports:[[i.b,o.FormsModule,r.M,a.i.forChild(O),s.b]]}),k)}}]);