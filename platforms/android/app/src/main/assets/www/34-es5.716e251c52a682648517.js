function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"52Fh":function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),o=n("TEn/"),s=n("mrSG"),l=n("lGQG"),c=n("te5A"),d=n("m/P+"),m=n("wd/R"),u=n("B7Rs"),p=n("FAH8"),h=n("9HCY"),f=n("IfdK"),v=n("5zL6"),x=n("3LUQ"),g=n("xG9w"),_=n("fXoL"),y=n("tk/3");function S(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"ion-avatar",13),_["\u0275\u0275element"](1,"img",14),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](1),_["\u0275\u0275propertyInterpolate"]("src",n.assets,_["\u0275\u0275sanitizeUrl"])}}function w(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-avatar",13),_["\u0275\u0275element"](1,"ion-icon",15),_["\u0275\u0275elementEnd"]())}function E(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-list"),_["\u0275\u0275element"](1,"br"),_["\u0275\u0275element"](2,"ion-spinner",17),_["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-list"),_["\u0275\u0275elementStart"](1,"ion-item"),_["\u0275\u0275text"](2,"No report cards for this student"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275elementStart"](1,"ion-select-option",27),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275propertyInterpolate"]("value",n),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n)}}function C(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275elementStart"](1,"ion-select-option",27),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275propertyInterpolate"]("value",n.term_id),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n.term_name)}}function I(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ion-item"),_["\u0275\u0275elementStart"](1,"ion-grid"),_["\u0275\u0275elementStart"](2,"ion-row",28),_["\u0275\u0275listener"]("click",(function(){_["\u0275\u0275restoreView"](n);var e=t.$implicit;return _["\u0275\u0275nextContext"](3).reportData(e)})),_["\u0275\u0275elementStart"](3,"ion-col",29),_["\u0275\u0275text"](4),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](5,"ion-col",30),_["\u0275\u0275listener"]("click",(function(){_["\u0275\u0275restoreView"](n);var e=t.$implicit;return _["\u0275\u0275nextContext"](3).reportData(e)})),_["\u0275\u0275elementStart"](6,"strong"),_["\u0275\u0275text"](7,"Teacher: "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](8),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](9,"ion-col",31),_["\u0275\u0275text"](10),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](11,"ion-row"),_["\u0275\u0275elementStart"](12,"ion-row"),_["\u0275\u0275elementStart"](13,"ion-col",32),_["\u0275\u0275listener"]("click",(function(){_["\u0275\u0275restoreView"](n);var e=t.$implicit;return _["\u0275\u0275nextContext"](3).reportData(e)})),_["\u0275\u0275elementStart"](14,"strong"),_["\u0275\u0275element"](15,"ion-icon",33),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](16),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](17,"ion-col"),_["\u0275\u0275elementStart"](18,"ion-col",34),_["\u0275\u0275listener"]("click",(function(){_["\u0275\u0275restoreView"](n);var e=t.$implicit;return _["\u0275\u0275nextContext"](3).prepare(e.term_id)})),_["\u0275\u0275element"](19,"img",35),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,i=_["\u0275\u0275nextContext"](3);_["\u0275\u0275advance"](4),_["\u0275\u0275textInterpolate1"]("",a.term_name," "),_["\u0275\u0275advance"](4),_["\u0275\u0275textInterpolate1"](" ",a.report_card_comments.teacher_name,""),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate"](a.class_name),_["\u0275\u0275advance"](6),_["\u0275\u0275textInterpolate1"](" : ",i.format(a.closing_date)," ")}}function O(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ion-list"),_["\u0275\u0275elementStart"](1,"ion-list"),_["\u0275\u0275elementStart"](2,"ion-list-header"),_["\u0275\u0275elementStart"](3,"ion-button",18),_["\u0275\u0275listener"]("click",(function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"](2).hide()})),_["\u0275\u0275text"](4,"Filter "),_["\u0275\u0275element"](5,"ion-icon",19),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](6,"div",20),_["\u0275\u0275elementStart"](7,"ion-item"),_["\u0275\u0275elementStart"](8,"ion-label"),_["\u0275\u0275text"](9,"Class"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](10,"ion-select",21),_["\u0275\u0275listener"]("ionChange",(function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"](2).classChange(e)})),_["\u0275\u0275elementStart"](11,"ion-select-option",22),_["\u0275\u0275text"](12,"All"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](13,b,3,2,"div",23),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](14,"ion-item"),_["\u0275\u0275elementStart"](15,"ion-label"),_["\u0275\u0275text"](16,"Term"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](17,"ion-select",24),_["\u0275\u0275listener"]("ionChange",(function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"](2).termChange(e)})),_["\u0275\u0275template"](18,C,3,2,"div",23),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](19,"ion-item",25),_["\u0275\u0275elementStart"](20,"ion-button",26),_["\u0275\u0275listener"]("click",(function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"](2).filter()})),_["\u0275\u0275text"](21,"Filter"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](22,I,20,4,"ion-item",23),_["\u0275\u0275elementEnd"]()}if(2&e){var a=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](13),_["\u0275\u0275property"]("ngForOf",a.class_history),_["\u0275\u0275advance"](5),_["\u0275\u0275property"]("ngForOf",a.terms),_["\u0275\u0275advance"](4),_["\u0275\u0275property"]("ngForOf",a.report_cards)}}function j(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275template"](1,E,3,0,"ion-list",16),_["\u0275\u0275template"](2,k,3,0,"ion-list",16),_["\u0275\u0275template"](3,O,23,3,"ion-list",16),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0===n.report_cards.length&&1===n.fake),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0===n.report_cards.length&&0===n.fake),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",n.report_cards.length>0)}}function A(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275elementStart"](1,"ion-select-option",27),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275propertyInterpolate"]("value",n),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n)}}function M(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275elementStart"](1,"ion-select-option",27),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275propertyInterpolate"]("value",n.term_name),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n.term_name)}}function T(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275element"](1,"br"),_["\u0275\u0275element"](2,"ion-spinner",17),_["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-item"),_["\u0275\u0275text"](1," No exam marks for this student. "),_["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-col",43),_["\u0275\u0275text"](1,"Change"),_["\u0275\u0275elementEnd"]())}function V(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"ion-item",39),_["\u0275\u0275elementStart"](1,"ion-col",40),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](3,R,2,0,"ion-col",41),_["\u0275\u0275elementStart"](4,"ion-col",42),_["\u0275\u0275text"](5),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](),a=n.index,i=n.$implicit,r=_["\u0275\u0275nextContext"](3);_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate1"](" ",r.exam_mark_header," "),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0!=a),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate"](i.ty)}}function z(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"ion-col",49),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]().$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"]("",n.subject_name," ")}}function P(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"ion-col",50),_["\u0275\u0275text"](1),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]().$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n.subject_name)}}function $(e,t){1&e&&_["\u0275\u0275element"](0,"ion-col",51)}function N(e,t){1&e&&_["\u0275\u0275element"](0,"ion-icon",54)}function D(e,t){1&e&&_["\u0275\u0275element"](0,"ion-icon",55)}function L(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"ion-col",51),_["\u0275\u0275text"](1),_["\u0275\u0275template"](2,N,1,0,"ion-icon",52),_["\u0275\u0275template"](3,D,1,0,"ion-icon",53),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]().index,a=_["\u0275\u0275nextContext"]().$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](a.change[n]),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",a.change[n]<0),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",a.change[n]>0)}}function U(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"ion-item"),_["\u0275\u0275template"](1,z,2,1,"ion-col",44),_["\u0275\u0275template"](2,P,2,1,"ion-col",45),_["\u0275\u0275template"](3,$,1,0,"ion-col",46),_["\u0275\u0275template"](4,L,4,3,"ng-template",null,47,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementStart"](6,"ion-col",48),_["\u0275\u0275elementStart"](7,"strong"),_["\u0275\u0275text"](8),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=_["\u0275\u0275reference"](5),i=_["\u0275\u0275nextContext"]().index;_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",null===n.parent_subject_name),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",null!==n.parent_subject_name),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0==i)("ngIfElse",a),_["\u0275\u0275advance"](5),_["\u0275\u0275textInterpolate"](n.mark),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"]("/",n.grade_weight," ")}}function G(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275template"](1,V,6,3,"ion-item",38),_["\u0275\u0275template"](2,U,10,6,"ion-item",23),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",void 0!==n.ty),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",n.marks)}}function q(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275template"](1,G,3,2,"div",23),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",n.examdata)}}function J(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275elementStart"](1,"div",36),_["\u0275\u0275elementStart"](2,"strong",37),_["\u0275\u0275text"](3,"For classes 4 & 8, select term 3, all other classes - term 2"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](4,"ion-list-header"),_["\u0275\u0275elementStart"](5,"ion-button",18),_["\u0275\u0275listener"]("click",(function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().hide()})),_["\u0275\u0275text"](6,"Filter "),_["\u0275\u0275element"](7,"ion-icon",19),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](8,"div",20),_["\u0275\u0275elementStart"](9,"ion-item"),_["\u0275\u0275elementStart"](10,"ion-label"),_["\u0275\u0275text"](11,"Class"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](12,"ion-select",21),_["\u0275\u0275listener"]("ionChange",(function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().classExamChange(e)})),_["\u0275\u0275template"](13,A,3,2,"div",23),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](14,"ion-item"),_["\u0275\u0275elementStart"](15,"ion-label"),_["\u0275\u0275text"](16,"Term"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](17,"ion-select",24),_["\u0275\u0275listener"]("ionChange",(function(e){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().termExamChange(e)})),_["\u0275\u0275template"](18,M,3,2,"div",23),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](19,"ion-item",25),_["\u0275\u0275elementStart"](20,"ion-button",26),_["\u0275\u0275listener"]("click",(function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().filterExam()})),_["\u0275\u0275text"](21,"Filter"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](22,T,3,0,"div",16),_["\u0275\u0275template"](23,F,2,0,"ion-item",16),_["\u0275\u0275template"](24,q,2,1,"div",16),_["\u0275\u0275elementEnd"]()}if(2&e){var a=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](13),_["\u0275\u0275property"]("ngForOf",a.class_history),_["\u0275\u0275advance"](5),_["\u0275\u0275property"]("ngForOf",a.terms),_["\u0275\u0275advance"](4),_["\u0275\u0275property"]("ngIf",0===a.examdata.length&&1===a.fake),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0===a.examdata.length&&0===a.fake),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",a.examdata.length>0)}}function Y(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275element"](1,"br"),_["\u0275\u0275element"](2,"ion-spinner",17),_["\u0275\u0275elementEnd"]())}function B(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-item"),_["\u0275\u0275text"](1," No assements for this student. "),_["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ion-item"),_["\u0275\u0275elementStart"](1,"div",57),_["\u0275\u0275listener"]("click",(function(){_["\u0275\u0275restoreView"](n);var e=t.$implicit,a=_["\u0275\u0275nextContext"](3);return a.download(e.file_name,a.url+e.file_name)})),_["\u0275\u0275elementStart"](2,"ion-col",58),_["\u0275\u0275text"](3),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](4,"ion-col",59),_["\u0275\u0275text"](5," \xa0\xa0Download"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;_["\u0275\u0275advance"](3),_["\u0275\u0275textInterpolate2"]("",a.term_name," ",a.class_name," \xa0\xa0\xa0")}}function W(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div"),_["\u0275\u0275template"](1,H,6,2,"ion-item",23),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngForOf",n.assessments)}}function X(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div",56),_["\u0275\u0275template"](1,Y,3,0,"div",16),_["\u0275\u0275template"](2,B,2,0,"ion-item",16),_["\u0275\u0275template"](3,W,2,1,"div",16),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0===n.assessments.length&&1===n.fake),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",0===n.assessments.length&&0===n.fake),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",n.assessments.length>0)}}function K(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"ion-fab",60),_["\u0275\u0275listener"]("click",(function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275nextContext"]().addfeed()})),_["\u0275\u0275elementStart"](1,"ion-fab-button",61),_["\u0275\u0275element"](2,"ion-icon",62),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()}}var Q,Z=((Q=function(){function e(t,n,a,i,r,o,s,l,c,d,m,u){var p=this;_classCallCheck(this,e),this.transfer=t,this.spinnerDialog=n,this.file=a,this.iab=i,this.authService=r,this.route=o,this.fileOpener=s,this.router=l,this.http=c,this.env=d,this.alertService=m,this.session=u,this.hidden=!0,this.options={location:"yes",hidden:"no",clearcache:"yes",clearsessioncache:"yes",zoom:"yes",hardwareback:"yes",mediaPlaybackRequiresUserAction:"no",shouldPauseOnSuspend:"no",closebuttoncaption:"Close",disallowoverscroll:"no",toolbar:"yes",enableViewportScale:"no",allowInlineMediaPlayback:"no",presentationstyle:"pagesheet",fullscreen:"yes"},this.reportcards=new Array,this.exams=new Array,this.assessments=new Array,this.schoolInfo=new Array,this.examdata=new Array,this.term=new Object,this.types=new Array,this.type=new Array,this.changes=new Array,this.term_id=new Array,this.terms=new Array,this.term_data=new Array,this.j=new Array,this.fake=1,this.class_history=new Array,this.report_cards=new Array,this.cbc_reports=new Array,this.cbcdata=new Array,this.reports=new Array,setTimeout((function(){p.fake=0}),5e3),this.schoolDetails=new Object,this.examTypes=new Array,this.route.queryParams.subscribe((function(e){p.router.getCurrentNavigation().extras.state&&(p.student=p.router.getCurrentNavigation().extras.state.details,console.log(p.student),p.term_id=p.router.getCurrentNavigation().extras.state.tids,p.assets=null===p.student.student_image?1:"https://".concat(p.student.school,".eduweb.co.ke/assets/students/").concat(p.student.student_image),p.url="https://".concat(p.student.school,".eduweb.co.ke/assets/students/"),p.cdn="https://".concat(p.student.school,".eduweb.co.ke/assets/reportcards/").concat(p.student.school,"/")),p.session.sessionTimeOut()})),this.segment="reports"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.checkFeed().then((function(e){t.feedback=e}));case 2:return e.next=4,this.authService.getSchool(this.student.school).subscribe((function(e){t.data5=e,t.schoolInfo=t.data5.data,t.schoolInfo.forEach((function(e){"School Level"==e.name&&(t.schoolLevel=e.value)}))}));case 4:return setTimeout((function(){"Secondary"===t.schoolLevel?t.authService.highCards(t.student.school,t.student.student_id).subscribe((function(e){t.data=e,console.log(t.data),t.report_cards=void 0===t.data.data?[]:t.data.data,t.report_cards=g.a(t.report_cards,"term_id").reverse()})):"Primary"===t.schoolLevel&&t.authService.cards(t.student.school,t.student.student_id).subscribe((function(e){t.data=e,t.report_cards=void 0===t.data.data?[]:t.data.data,t.report_cards=g.a(t.report_cards,"term_id").reverse()}))}),3e3),e.next=7,this.authService.currentTerm(this.student.school).subscribe((function(e){t.data2=e,t.term=t.data2.data}));case 7:return e.next=9,this.authService.schoolTerm(this.student.school,this.student.student_id).subscribe((function(e){t.term_data=e,t.terms=t.term_data.data,t.ter_id=t.terms[0].term_id,t.class_history=t.terms.map((function(e){return e.class_name})).filter((function(e,t,n){return n.indexOf(e)===t})),t.class_id=t.terms[0].class_id,t.exam_mark_header=t.terms[0].class_name+t.terms[0].term_name}));case 9:return e.next=11,this.authService.examsTypes(this.student.school,this.student.class_cat_id).subscribe((function(e){t.data1=e,t.types=t.data1.nodata?[]:t.data1.data}));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"segmentChanged",value:function(e){var t=this,n=e.detail.value;"exam"===n&&(this.fake=1,setTimeout((function(){t.fake=0}),2e3),this.exam()),"Assessment"===n&&(this.fake=1,setTimeout((function(){t.fake=0}),2e3),this.assessment()),"reports"===n&&(this.fake=1,setTimeout((function(){t.fake=0}),1e3),this.ionViewWillEnter()),"cbcreports"===n&&(this.fake=1,setTimeout((function(){t.fake=0}),2e3),this.cbcreports())}},{key:"view1",value:function(e){this.iab.create(e,"_blank",this.options)}},{key:"exam",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.exams(this.student.school,this.class_id,this.student.student_id,this.ter_id).subscribe((function(e){t.term_data.nodata?(t.alertService.presentToast("No exam marks for term selected"),t.exams=[]):(t.data3=e,t.exams=void 0===t.data3.data?[]:t.data3.data,t.exams.forEach((function(e){t.type.push(e.exam_type)})),console.log("School terms"+JSON.stringify(t.terms)),t.types=t.type.filter((function(e,t,n){return n.indexOf(e)===t})),t.types.forEach((function(e){for(var n,a=e,i=[],r=[],o=0;o<t.exams.length;o++)t.exams[o].exam_type===e&&(n=t.exams[o].mark-(void 0===t.exams[o-1]?0:t.exams[o-1].mark),i.push(t.exams[o]),r.push(n));t.examdata.push({ty:a,marks:i,change:r})})))}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"cbcreports",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.cbcreport(this.student.school,this.student.student_id).subscribe((function(e){t.cbcdata=e,t.cbc_reports=null==t.cbcdata.data?[]:t.cbcdata.data,console.log("cbcreports>>>>"+JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"calChange",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.terms[1].term_id,a=this.terms[1].class_id,e.next=3,this.authService.exams(this.student.school,a,this.student.student_id,n).subscribe((function(e){i.changes=void 0===(t=e).data?[]:t.data}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"onlyUnique",value:function(e,t,n){return n.indexOf(e)===t}},{key:"assessment",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.assessment(this.student.school,this.student.student_id).subscribe((function(e){if(t.data4=e,t.data4.nodata)t.assessments=[];else{var n=void 0===t.data4.data?[]:t.data4.data;n.sort((function(e,t){return e.term_id<t.term_id?1:-1})),t.assessments=n}}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"reportData",value:function(e){null!==e.exam_marks?this.router.navigate(["grades"],{state:{details:this.student,examTypes:this.types,schoolInfo:this.schoolInfo,reports:e,level:this.schoolLevel}}):this.authService.presentAlert1("Click on download icon to view report card.")}},{key:"cbcClick",value:function(e){this.prepare(e.term_id)}},{key:"classChange",value:function(e){var t=this;this.c_id=e.target.value,"all"===this.c_id?this.terms=this.term_data.data:(this.terms=this.term_data.data,this.terms=this.terms.filter((function(e){return e.class_name==t.c_id})))}},{key:"termChange",value:function(e){this.t_id=e.target.value}},{key:"termExamChange",value:function(e){var t=this;this.ter_id=e.target.value,this.header_two=this.ter_id,this.terms.filter((function(e){e.term_name===t.ter_id&&(t.ter_id=e.term_id)}))}},{key:"classExamChange",value:function(e){var t=this,n=e.target.value;this.header_one=n,this.terms=this.term_data.data,console.log(this.terms),this.terms=this.terms.filter((function(e){if(e.class_name===n)return t.class_id=e.class_id,e.class_id==t.class_id})),console.log(this.class_id),console.log(this.terms)}},{key:"filter",value:function(){var e=this;this.report_cards=void 0===this.data.data?[]:this.data.data,this.report_cards=this.report_cards.filter((function(t){return t.term_id==e.t_id}))}},{key:"filterExam",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.authService.presentLoading(),this.examdata=[],this.exam_mark_header="",e.next=5,this.authService.exams(this.student.school,this.class_id,this.student.student_id,this.ter_id).subscribe((function(e){t.data1=e,t.data1.nodata?(t.alertService.presentToast("No exam marks for term selected"),t.exams=[],t.examdata=[],t.authService.dismiss()):(t.data3=e,t.exams=void 0===t.data3.data?[]:t.data3.data,t.exams.forEach((function(e){t.type.push(e.exam_type)})),t.types=t.type.filter((function(e,t,n){return n.indexOf(e)===t})),t.types.forEach((function(e){console;for(var n,a=e,i=[],r=[],o=0;o<t.exams.length;o++)t.exams[o].exam_type===e&&(n=t.exams[o].mark-(void 0===t.exams[o-1]?0:t.exams[o-1].mark),i.push(t.exams[o]),r.push(n));t.examdata.push({ty:a,marks:i,change:r}),t.authService.dismiss()})))}));case 5:this.exam_mark_header=this.header_one+" "+this.header_two;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"hide",value:function(){1==this.hidden?(document.getElementById("hid").hidden=!1,this.hidden=!1):(document.getElementById("hid").hidden=!0,this.hidden=!0,this.report_cards=void 0===this.data.data?[]:this.data.data)}},{key:"prepare",value:function(e){var t;t=null!=this.student.middle_name?this.student.student_id+"_"+this.student.school+"_"+this.student.first_name+"_"+this.student.middle_name+"_"+this.student.last_name+"_"+e+".pdf":this.student.student_id+"_"+this.student.school+"_"+this.student.first_name+"__"+this.student.last_name+"_"+e+".pdf",console.log(t);var n=this.cdn+t.replace(/\s/g,"_");n.includes("'")&&(n=n.replace(/'/g,"''")),console.log(n),this.download(t,n)}},{key:"getMIMEtype",value:function(e){return{txt:"text/plain",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",doc:"application/msword",pdf:"application/pdf",jpg:"image/jpeg",bmp:"image/bmp",png:"image/png",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",rtf:"application/rtf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}[e.toLowerCase()]}},{key:"open",value:function(e){var t=this;this.authService.dismiss();var n=e.split(".").reverse()[0],a=this.getMIMEtype(n);console.log(n,a,e),this.fileOpener.showOpenWithDialog(e,a).then((function(){return console.log("File is opened")})).catch((function(e){t.alertService.presentToast(e)}))}},{key:"download",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.authService.presentLoading();case 2:a=encodeURI(t),this.fileTransfer=this.transfer.create(),this.fileTransfer.download(a,this.file.dataDirectory+e,!0).then((function(e){console.log("download completed: "+e.toURL()),i.open(e.toURL())})).catch((function(t){i.authService.dismiss(),/\s/.test(e)&&i.alertService.presentToast("Download failed: File Name has spaces"),i.alertService.presentToast("Download failed: File not found"),console.log("download failed: "+JSON.stringify(t))}));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"addfeed",value:function(){this.router.navigate(["feedback"],{})}},{key:"format",value:function(e){return m(e).format("DD-MM-YYYY")}}]),e}()).\u0275fac=function(e){return new(e||Q)(_["\u0275\u0275directiveInject"](u.a),_["\u0275\u0275directiveInject"](h.a),_["\u0275\u0275directiveInject"](p.a),_["\u0275\u0275directiveInject"](d.a),_["\u0275\u0275directiveInject"](l.a),_["\u0275\u0275directiveInject"](r.a),_["\u0275\u0275directiveInject"](c.a),_["\u0275\u0275directiveInject"](r.g),_["\u0275\u0275directiveInject"](y.a),_["\u0275\u0275directiveInject"](v.a),_["\u0275\u0275directiveInject"](x.a),_["\u0275\u0275directiveInject"](f.a))},Q.\u0275cmp=_["\u0275\u0275defineComponent"]({type:Q,selectors:[["app-grading"]],decls:26,vars:11,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],["slot","start",4,"ngIf"],[2,"text-transform","uppercase"],["value","details","mode","md",3,"ngModel","ionChange","ngModelChange"],["value","reports"],["value","exam"],["value","Assessment"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","ion-no-padding",4,"ngSwitchCase"],["vertical","bottom","horizontal","end","slot","fixed",3,"click",4,"ngIf"],["slot","start"],[3,"src"],["size","32","name","happy-outline",2,"font-size","2em"],[4,"ngIf"],["name","lines-small","color","primary",2,"text-align","center","margin-left","50%","margin-right","50%"],["size","small",2,"color","black",3,"click"],["name","chevron-down"],["id","hid","hidden","",2,"padding-left","8px","padding-right","8px"],["id","class","cancelText","Cancel","okText","Ok",3,"ionChange"],["value","all"],[4,"ngFor","ngForOf"],["cancelText","Cancel","okText","Ok",3,"ionChange"],["lines","none"],["slot","end","color","dark",3,"click"],[3,"value"],[3,"click"],[2,"text-align","left"],["col-5","",2,"text-align","right",3,"click"],[2,"text-align","center"],["col-6","",2,"text-align","left",3,"click"],["name","calendar"],["col-6","",2,"text-align","center",3,"click"],["src","assets/img/download.png","width","18px","height","18px"],[2,"margin","10px"],[2,"color","green"],["style","margin: 0px !important;",4,"ngIf"],[2,"margin","0px !important"],["col-7","",2,"color","green","font-size","12px","font-weight","500"],["col-3","","style","text-align: center !important;",4,"ngIf"],["col-2","",2,"text-align","right","color","black","font-size","12px","font-weight","500"],["col-3","",2,"text-align","center !important"],["col-7","","style","margin-left: 0px;font-size: 12px;font-weight: 500; margin:0px !important",4,"ngIf"],["col-7","","style","margin-left: 20px !important;font-size: 11px;font-weight: 400;",4,"ngIf"],["col-3","","style","text-align: center !important; font-size: 12;",4,"ngIf","ngIfElse"],["notEq",""],["col-2","",2,"text-align","right !important","color","black","margin","0px !important"],["col-7","",2,"margin-left","0px","font-size","12px","font-weight","500","margin","0px !important"],["col-7","",2,"margin-left","20px !important","font-size","11px","font-weight","400"],["col-3","",2,"text-align","center !important","font-size","12"],["style","color: red;","name","arrow-down-circle-outline",4,"ngIf"],["style","color: green;","name","arrow-up-circle-outline",4,"ngIf"],["name","arrow-down-circle-outline",2,"color","red"],["name","arrow-up-circle-outline",2,"color","green"],[1,"ion-no-padding"],[2,"width","100%",3,"click"],["col-10","",2,"color","black","font-size","12px","font-weight","500"],["col-2","",2,"color","blue","font-size","14px","font-weight","500","text-align","end !important","position","absolute","right","8px"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","tertiary"],["name","chatbox-ellipses"]],template:function(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"ion-header"),_["\u0275\u0275elementStart"](1,"ion-toolbar",0),_["\u0275\u0275elementStart"](2,"ion-buttons",1),_["\u0275\u0275element"](3,"ion-back-button",2),_["\u0275\u0275text"](4,"EXAMS & GRADES "),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](5,"ion-item"),_["\u0275\u0275template"](6,S,2,1,"ion-avatar",3),_["\u0275\u0275template"](7,w,2,0,"ion-avatar",3),_["\u0275\u0275elementStart"](8,"ion-label",4),_["\u0275\u0275text"](9),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](10,"ion-segment",5),_["\u0275\u0275listener"]("ionChange",(function(e){return t.segmentChanged(e)}))("ngModelChange",(function(e){return t.segment=e})),_["\u0275\u0275elementStart"](11,"ion-segment-button",6),_["\u0275\u0275elementStart"](12,"ion-label"),_["\u0275\u0275text"](13,"Report Cards"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](14,"ion-segment-button",7),_["\u0275\u0275elementStart"](15,"ion-label"),_["\u0275\u0275text"](16,"Exam Marks"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](17,"ion-segment-button",8),_["\u0275\u0275elementStart"](18,"ion-label"),_["\u0275\u0275text"](19,"Assessment"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](20,"ion-content"),_["\u0275\u0275elementStart"](21,"div",9),_["\u0275\u0275template"](22,j,4,3,"div",10),_["\u0275\u0275template"](23,J,25,5,"div",10),_["\u0275\u0275template"](24,X,4,3,"div",11),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](25,K,3,0,"ion-fab",12),_["\u0275\u0275elementEnd"]()),2&e&&(_["\u0275\u0275advance"](6),_["\u0275\u0275property"]("ngIf",1!==t.assets),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",1===t.assets),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate3"]("",t.student.first_name," ",t.student.middle_name," ",t.student.last_name," "),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngModel",t.segment),_["\u0275\u0275advance"](11),_["\u0275\u0275property"]("ngSwitch",t.segment),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngSwitchCase","reports"),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngSwitchCase","exam"),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngSwitchCase","Assessment"),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf","true"===t.feedback))},directives:[o.q,o.L,o.g,o.d,o.e,o.t,a.i,o.u,o.C,o.V,i.NgControlStatus,i.NgModel,o.D,o.l,a.k,a.l,o.c,o.r,o.v,o.H,o.w,o.f,o.E,o.F,a.h,o.p,o.B,o.k,o.n,o.o],styles:["ion-segment[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-transform:unset;color:#fff;font-size:12px}ion-content[_ngcontent-%COMP%]{font-size:12px}ion-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{color:#000;font-size:12px}#class[_ngcontent-%COMP%]{max-width:65%!important}ion-select[_ngcontent-%COMP%]{width:100%;justify-content:center}.center[_ngcontent-%COMP%]{text-align:right}"]}),Q);n.d(t,"GradingPageModule",(function(){return ne}));var ee,te=[{path:"",component:Z}],ne=((ee=function e(){_classCallCheck(this,e)}).\u0275mod=_["\u0275\u0275defineNgModule"]({type:ee}),ee.\u0275inj=_["\u0275\u0275defineInjector"]({factory:function(e){return new(e||ee)},imports:[[a.b,i.FormsModule,o.M,r.i.forChild(te)]]}),ee)}}]);