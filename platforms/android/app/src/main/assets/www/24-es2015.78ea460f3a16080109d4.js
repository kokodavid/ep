(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{qUUn:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("3Pt+"),s=n("tyNb"),a=n("TEn/"),r=n("tk/3"),c=n("mrSG"),l=n("lGQG"),d=n("te5A"),m=n("B7Rs"),p=n("FAH8"),h=n("9HCY"),f=n("wd/R"),u=n("IfdK"),v=n("RU0F"),g=n("m/P+"),x=n("3LUQ"),w=n("XSEc"),b=n("LfQc"),I=n("fXoL"),S=n("jhN1");function j(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div"),I["\u0275\u0275elementStart"](1,"ion-card-content"),I["\u0275\u0275element"](2,"div",7),I["\u0275\u0275element"](3,"br"),I["\u0275\u0275elementStart"](4,"div"),I["\u0275\u0275element"](5,"div",7),I["\u0275\u0275elementEnd"](),I["\u0275\u0275element"](6,"br"),I["\u0275\u0275elementStart"](7,"p"),I["\u0275\u0275text"](8),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){const e=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("innerHTML",e.newsinfo.subject,I["\u0275\u0275sanitizeHtml"]),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("innerHTML",e.newsinfo.message,I["\u0275\u0275sanitizeHtml"]),I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate2"]("Posted By ",e.newsinfo.posted_by,", ",e.formatdate(e.newsinfo.creation_date),"")}}function M(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"ion-card-content"),I["\u0275\u0275element"](1,"div",7),I["\u0275\u0275element"](2,"br"),I["\u0275\u0275elementStart"](3,"p"),I["\u0275\u0275text"](4),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()),2&e){const e=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("innerHTML",e.newsinfo.message,I["\u0275\u0275sanitizeHtml"]),I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate2"]("Posted By ",e.newsinfo.posted_by,", ",e.formatdate(e.newsinfo.creation_date),"")}}function E(e,t){if(1&e){const e=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"ion-list"),I["\u0275\u0275elementStart"](1,"ion-item",10),I["\u0275\u0275listener"]("click",(function(){I["\u0275\u0275restoreView"](e);const n=t.$implicit,i=I["\u0275\u0275nextContext"](2);return i.download(n,i.assets+n)})),I["\u0275\u0275elementStart"](2,"span"),I["\u0275\u0275text"](3),I["\u0275\u0275element"](4,"ion-icon",11),I["\u0275\u0275elementStart"](5,"a",12),I["\u0275\u0275text"](6),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate1"](" ",n+1,". "),I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate1"](" ",e," ")}}function C(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"div",8),I["\u0275\u0275template"](1,E,7,2,"ion-list",9),I["\u0275\u0275elementEnd"]()),2&e){const e=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngForOf",e.attachments)}}let y=(()=>{class e{constructor(e,t,n,i,o,s,a,r,c,l,d,m,p,h,f,u,v){this.transfer=e,this.spinnerDialog=t,this.file=n,this.fileOpener=i,this.navCtrl=o,this.authService=s,this.route=a,this.router=r,this.sessionService=c,this.streamingMedia=l,this.sanitizer=d,this.http=m,this.iab=p,this.alertService=h,this.adHTTP=f,this.document=u,this.platform=v,this.newsinfo=new Object,this.sessionService.sessionTimeOut(),this.route.queryParams.subscribe(e=>{if(this.router.getCurrentNavigation().extras.state)if(this.newsinfo=this.router.getCurrentNavigation().extras.state.details,this.school=this.router.getCurrentNavigation().extras.state.school,this.student_id=this.router.getCurrentNavigation().extras.state.student_id,null==this.newsinfo)this.navCtrl.navigateRoot("/dashboard");else{const e=this.newsinfo.attachment?this.newsinfo.attachment:null,t=null===e?"":e,n=null===t?null:t.split(",");this.attachments=""!==n[0]?n:[],console.log("here"+JSON.stringify(this.newsinfo)),this.assets=`https://${this.school}.eduweb.co.ke/assets/posts/`}})}ngOnInit(){console.log("student id "+this.student_id),this.http.get(`https://api.eduweb.co.ke/getParticularCommunication/${this.school}/${this.student_id}/${this.newsinfo.com_id}`).subscribe(e=>{console.log(e)})}getMIMEtype(e){return{txt:"text/plain",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",doc:"application/msword",pdf:"application/pdf",jpg:"image/jpeg",bmp:"image/bmp",png:"image/png",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",rtf:"application/rtf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",flv:"video/x-flv",mp4:"video/mp4",m3u8:"application/x-mpegURL",ts:"video/MP2T","3gp":"video/3gpp",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv"}[e.toLowerCase()]}open(e){this.authService.dismiss();const t=e.split(".").reverse()[0],n=this.getMIMEtype(t);console.log(t,n,e),this.fileOpener.showOpenWithDialog(e,n).then(()=>console.log("File is opened")).catch(e=>{this.authService.dismiss(),this.alertService.presentToast(e)})}download(e,t){return Object(c.a)(this,void 0,void 0,(function*(){this.authService.presentLoading();let n=null;n=this.platform.is("ios")?this.file.documentsDirectory:this.file.dataDirectory;const i=encodeURI(t);this.transfer.create().download(i,n+e,!0).then(e=>{let t=e.toURL();this.authService.dismiss(),this.open(t)})}))}openFileHandler(){this.fileOpener.open(this.downloadFile,"").then(()=>console.log("File is opened")).catch(e=>console.log("Error opening file",e))}trunc(e){return e.length>20?`${e.substr(0,20)}...`:e}formatdate(e){return f(e).format("MMM D, YYYY")}filterdate(e){return f(e).year}}return e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](m.a),I["\u0275\u0275directiveInject"](h.a),I["\u0275\u0275directiveInject"](p.a),I["\u0275\u0275directiveInject"](d.a),I["\u0275\u0275directiveInject"](a.R),I["\u0275\u0275directiveInject"](l.a),I["\u0275\u0275directiveInject"](s.a),I["\u0275\u0275directiveInject"](s.g),I["\u0275\u0275directiveInject"](u.a),I["\u0275\u0275directiveInject"](v.a),I["\u0275\u0275directiveInject"](S.DomSanitizer),I["\u0275\u0275directiveInject"](r.a),I["\u0275\u0275directiveInject"](g.a),I["\u0275\u0275directiveInject"](x.a),I["\u0275\u0275directiveInject"](w.a),I["\u0275\u0275directiveInject"](b.a),I["\u0275\u0275directiveInject"](a.T))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["app-news"]],decls:12,vars:3,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],[1,"ion-no-padding"],[4,"ngIf","ngIfElse"],["no_subject",""],["class","ion-padding",4,"ngIf"],[3,"innerHTML"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["no-padding","",2,"font-size","14px","color","blue","border-bottom","blue 1px !important",3,"click"],["name","document-attach","md","md-attach"],[2,"color","blue","font-size","13px","text-align","center"]],template:function(e,t){if(1&e&&(I["\u0275\u0275elementStart"](0,"ion-header"),I["\u0275\u0275elementStart"](1,"ion-toolbar",0),I["\u0275\u0275elementStart"](2,"ion-buttons",1),I["\u0275\u0275element"](3,"ion-back-button",2),I["\u0275\u0275text"](4,"MORE INFORMATION "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementStart"](5,"ion-content",3),I["\u0275\u0275elementStart"](6,"ion-card"),I["\u0275\u0275element"](7,"ion-card-header"),I["\u0275\u0275template"](8,j,9,4,"div",4),I["\u0275\u0275template"](9,M,5,3,"ng-template",null,5,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275elementEnd"](),I["\u0275\u0275template"](11,C,2,1,"div",6),I["\u0275\u0275elementEnd"]()),2&e){const e=I["\u0275\u0275reference"](10);I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("ngIf",t.newsinfo.subject!==t.newsinfo.message)("ngIfElse",e),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",t.attachments.length>0)}},directives:[a.q,a.L,a.g,a.d,a.e,a.l,a.h,a.j,i.i,a.i,i.h,a.v,a.t,a.r],styles:["ion-content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{color:#000}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:link{color:#00f}a[_ngcontent-%COMP%]:visited{color:#999}a[_ngcontent-%COMP%]:hover{color:#2b5aa1}"]}),e})();n.d(t,"NewsPageModule",(function(){return _}));const O=[{path:"",component:y}];let _=(()=>{class e{}return e.\u0275mod=I["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=I["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,o.FormsModule,a.M,s.i.forChild(O),r.b]]}),e})()}}]);