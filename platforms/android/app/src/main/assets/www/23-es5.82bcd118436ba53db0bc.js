function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+eMj":function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),o=n("Xa2L"),c=n("TEn/"),l=n("JqCM"),s=n("mrSG"),d=n("lGQG"),m=n("te5A"),u=n("B7Rs"),p=n("FAH8"),f=n("9HCY"),v=n("wd/R"),h=n("IfdK"),g=n("RU0F"),y=n("m/P+"),x=n("3LUQ"),M=n("XSEc"),_=n("LfQc"),w=n("jAoO"),b=n("fXoL"),C=n("jhN1"),S=n("tk/3");function O(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"th"),b["\u0275\u0275elementStart"](1,"b"),b["\u0275\u0275text"](2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate"](n.name)}}function E(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div"),b["\u0275\u0275element"](1,"div",9),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]().$implicit;b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("innerHTML",n.meal,b["\u0275\u0275sanitizeHtml"])}}function I(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"tr"),b["\u0275\u0275template"](1,E,2,1,"div",5),b["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=b["\u0275\u0275nextContext"]().index,i=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",n.day_name===i.days[a])}}function j(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"tr"),b["\u0275\u0275elementStart"](1,"td"),b["\u0275\u0275text"](2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](3,"td"),b["\u0275\u0275element"](4,"div",9),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](5,"td"),b["\u0275\u0275template"](6,I,2,1,"tr",8),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index,i=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"](" ",i.days[a]," "),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("innerHTML",n.meal,b["\u0275\u0275sanitizeHtml"]),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngForOf",i.meal2)}}function k(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div"),b["\u0275\u0275elementStart"](1,"table",6),b["\u0275\u0275elementStart"](2,"tr",7),b["\u0275\u0275elementStart"](3,"th"),b["\u0275\u0275elementStart"](4,"b"),b["\u0275\u0275text"](5,"DAYS"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](6,O,3,1,"th",8),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](7,j,7,3,"tr",8),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](6),b["\u0275\u0275property"]("ngForOf",n.sample_data),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngForOf",n.meal1)}}function P(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"h6"),b["\u0275\u0275elementStart"](1,"i"),b["\u0275\u0275text"](2,"No meal menu"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]())}var L,A=((L=function(){function e(t,n,a,i,r,o,c,l,s,d,m,u,p,f,v,h,g,y){var x=this;_classCallCheck(this,e),this.transfer=t,this.spinnerDialog=n,this.file=a,this.fileOpener=i,this.navCtrl=r,this.authService=o,this.route=c,this.router=l,this.sessionService=s,this.streamingMedia=d,this.sanitizer=m,this.http=u,this.iab=p,this.alertService=f,this.adHTTP=v,this.document=h,this.platform=g,this.screenshot=y,this.menu=new Array,this.data=new Array,this.days=new Array,this.meal_name=new Array,this.sample_data=new Array,this.meal1=new Array,this.meal2=new Array,this.route.queryParams.subscribe((function(e){x.router.getCurrentNavigation().extras.state&&(x.school=x.router.getCurrentNavigation().extras.state.details)}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.authService.presentLoading(),e.next=3,this.authService.getMenu(this.school).subscribe((function(e){var n=[],a=[],i=[];t.data=e,t.data.nodata?(t.noMenu=!0,t.authService.dismiss()):(t.authService.dismiss(),t.noMenu=!1),t.menu=null==t.data.data.menu?[]:t.data.data.menu,console.log("menu>>>",e),t.days=t.menu.filter((function(e){n.push(e.day_name),a.push(e.break_name)}));var r=["Monday","Tuesday","Wednesday","Thursday","Friday"];t.days=n.filter(t.onlyUnique),console.log(r),t.days.sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})),t.meal_name=a.filter(t.onlyUnique),t.meal_name.forEach((function(e){var n=e;i=[];for(var a=0;a<t.menu.length;a++)t.menu[a].break_name==e&&i.push(t.menu[a]);var r={name:n,meal:i.filter(t.onlyUnique)};t.sample_data.push(r)}));for(var o=0;o<t.sample_data.length;o++);t.meal1=null==t.sample_data[0].meal?[]:t.sample_data[0].meal,t.meal2=null==t.sample_data[1].meal?[]:t.sample_data[1].meal}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getMIMEtype",value:function(e){return{txt:"text/plain",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",doc:"application/msword",pdf:"application/pdf",jpg:"image/jpeg",bmp:"image/bmp",png:"image/png",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",rtf:"application/rtf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",flv:"video/x-flv",mp4:"video/mp4",m3u8:"application/x-mpegURL",ts:"video/MP2T","3gp":"video/3gpp",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv"}[e.toLowerCase()]}},{key:"open",value:function(e){var t=this;this.authService.dismiss();var n=e.split(".").reverse()[0],a=this.getMIMEtype(n);console.log(n,a,e),this.fileOpener.showOpenWithDialog(e,a).then((function(){return console.log("File is opened")})).catch((function(e){t.authService.dismiss(),t.alertService.presentToast(e)}))}},{key:"print",value:function(){this.screenshot.save("jpg",80,"myscreenshot.jpg").then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"download",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i,r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.authService.presentLoading(),a=this.platform.is("ios")?this.file.documentsDirectory:this.file.dataDirectory,i=encodeURI(t),this.transfer.create().download(i,a+e,!0).then((function(e){var t=e.toURL();r.authService.dismiss(),r.open(t)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"trunc",value:function(e){return e.length>20?"".concat(e.substr(0,20),"..."):e}},{key:"formatdate",value:function(e){return v(e).format("MMM D, YYYY")}},{key:"filterdate",value:function(e){return v(e).year}},{key:"onlyUnique",value:function(e,t,n){return n.indexOf(e)===t}}]),e}()).\u0275fac=function(e){return new(e||L)(b["\u0275\u0275directiveInject"](u.a),b["\u0275\u0275directiveInject"](f.a),b["\u0275\u0275directiveInject"](p.a),b["\u0275\u0275directiveInject"](m.a),b["\u0275\u0275directiveInject"](c.R),b["\u0275\u0275directiveInject"](d.a),b["\u0275\u0275directiveInject"](r.a),b["\u0275\u0275directiveInject"](r.g),b["\u0275\u0275directiveInject"](h.a),b["\u0275\u0275directiveInject"](g.a),b["\u0275\u0275directiveInject"](C.DomSanitizer),b["\u0275\u0275directiveInject"](S.a),b["\u0275\u0275directiveInject"](y.a),b["\u0275\u0275directiveInject"](x.a),b["\u0275\u0275directiveInject"](M.a),b["\u0275\u0275directiveInject"](_.a),b["\u0275\u0275directiveInject"](c.T),b["\u0275\u0275directiveInject"](w.a))},L.\u0275cmp=b["\u0275\u0275defineComponent"]({type:L,selectors:[["app-menu"]],decls:12,vars:3,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],[1,"table_wrapper"],[2,"text-transform","capitalize","text-align","center"],[4,"ngIf"],["border","1","width","100%"],["width","100%",2,"font-weight","400"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"ion-header"),b["\u0275\u0275elementStart"](1,"ion-toolbar",0),b["\u0275\u0275elementStart"](2,"ion-buttons",1),b["\u0275\u0275element"](3,"ion-back-button",2),b["\u0275\u0275text"](4,"MEALS MENU "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](5,"ion-content"),b["\u0275\u0275elementStart"](6,"div",3),b["\u0275\u0275elementStart"](7,"p",4),b["\u0275\u0275elementStart"](8,"b"),b["\u0275\u0275text"](9),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](10,k,8,2,"div",5),b["\u0275\u0275template"](11,P,3,0,"h6",5),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](9),b["\u0275\u0275textInterpolate1"]("",t.school," Meal Menu"),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",0==t.noMenu),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",1==t.noMenu))},directives:[c.q,c.L,c.g,c.d,c.e,c.l,a.i,a.h],styles:["ion-content[_ngcontent-%COMP%]{font-size:13px}ion-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ddd}ion-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#000;color:#fff}ion-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;text-align:left}ion-content[_ngcontent-%COMP%]   .table_wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}ion-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-align:center;color:#397c49}"]}),L);n.d(t,"MenuPageModule",(function(){return F}));var T,R=[{path:"",component:A}],F=((T=function e(){_classCallCheck(this,e)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:T}),T.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||T)},imports:[[a.b,i.FormsModule,c.M,o.a,l.a,r.i.forChild(R)]]}),T)}}]);