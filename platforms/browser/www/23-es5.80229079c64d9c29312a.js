function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+eMj":function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),o=n("Xa2L"),s=n("TEn/"),l=n("JqCM"),c=n("mrSG"),d=n("lGQG"),m=n("te5A"),u=n("B7Rs"),p=n("FAH8"),f=n("9HCY"),v=n("wd/R"),h=n("IfdK"),y=n("RU0F"),g=n("m/P+"),x=n("3LUQ"),w=n("XSEc"),b=n("LfQc"),S=n("fXoL"),I=n("jhN1"),j=n("tk/3");function _(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"td"),S["\u0275\u0275elementStart"](1,"b"),S["\u0275\u0275text"](2),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](n.name)}}function E(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div"),S["\u0275\u0275element"](1,"div",6),S["\u0275\u0275elementEnd"]()),2&e){var n=S["\u0275\u0275nextContext"]().$implicit;S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("innerHTML",n.meal,S["\u0275\u0275sanitizeHtml"])}}function M(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275template"](1,E,2,1,"div",7),S["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=S["\u0275\u0275nextContext"]().index,i=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("ngIf",n.day_name===i.days[a])}}function k(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275elementStart"](1,"td"),S["\u0275\u0275text"](2),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](3,"td"),S["\u0275\u0275element"](4,"div",6),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275template"](6,M,2,1,"tr",5),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index,i=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate1"](" ",i.days[a]," "),S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("innerHTML",n.meal,S["\u0275\u0275sanitizeHtml"]),S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("ngForOf",i.meal2)}}var C,O=((C=function(){function e(t,n,a,i,r,o,s,l,c,d,m,u,p,f,v,h,y){var g=this;_classCallCheck(this,e),this.transfer=t,this.spinnerDialog=n,this.file=a,this.fileOpener=i,this.navCtrl=r,this.authService=o,this.route=s,this.router=l,this.sessionService=c,this.streamingMedia=d,this.sanitizer=m,this.http=u,this.iab=p,this.alertService=f,this.adHTTP=v,this.document=h,this.platform=y,this.menu=new Array,this.data=new Array,this.days=new Array,this.meal_name=new Array,this.sample_data=new Array,this.meal1=new Array,this.meal2=new Array,this.route.queryParams.subscribe((function(e){g.router.getCurrentNavigation().extras.state&&(g.school=g.router.getCurrentNavigation().extras.state.details)}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.authService.presentLoading(),e.next=3,this.authService.getMenu(this.school).subscribe((function(e){var n=[],a=[],i=[];t.data=e,t.menu=null==t.data.data.menu?[]:t.data.data.menu,t.days=t.menu.filter((function(e){n.push(e.day_name),a.push(e.break_name)}));var r=["Monday","Tuesday","Wednesday","Thursday","Friday"];t.days=n.filter(t.onlyUnique),console.log(t.days),console.log(r),t.days.sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})),console.log("formatted>>>"+t.days),t.meal_name=a.filter(t.onlyUnique),t.meal_name.forEach((function(e){var n=e;i=[];for(var a=0;a<t.menu.length;a++)console.log(t.menu[a]),t.menu[a].break_name==e&&i.push(t.menu[a]);var r={name:n,meal:i.filter(t.onlyUnique)};t.sample_data.push(r)})),console.log(t.sample_data);for(var o=0;o<t.sample_data.length;o++);t.meal1=null==t.sample_data[0].meal?[]:t.sample_data[0].meal,t.meal2=null==t.sample_data[1].meal?[]:t.sample_data[1].meal,t.authService.dismiss()}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getMIMEtype",value:function(e){return{txt:"text/plain",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",doc:"application/msword",pdf:"application/pdf",jpg:"image/jpeg",bmp:"image/bmp",png:"image/png",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",rtf:"application/rtf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",flv:"video/x-flv",mp4:"video/mp4",m3u8:"application/x-mpegURL",ts:"video/MP2T","3gp":"video/3gpp",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv"}[e.toLowerCase()]}},{key:"open",value:function(e){var t=this;this.authService.dismiss();var n=e.split(".").reverse()[0],a=this.getMIMEtype(n);console.log(n,a,e),this.fileOpener.showOpenWithDialog(e,a).then((function(){return console.log("File is opened")})).catch((function(e){t.authService.dismiss(),t.alertService.presentToast(e)}))}},{key:"download",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i,r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.authService.presentLoading(),a=this.platform.is("ios")?this.file.documentsDirectory:this.file.dataDirectory,i=encodeURI(t),this.transfer.create().download(i,a+e,!0).then((function(e){var t=e.toURL();r.authService.dismiss(),r.open(t)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"trunc",value:function(e){return e.length>20?"".concat(e.substr(0,20),"..."):e}},{key:"formatdate",value:function(e){return v(e).format("MMM D, YYYY")}},{key:"filterdate",value:function(e){return v(e).year}},{key:"onlyUnique",value:function(e,t,n){return n.indexOf(e)===t}}]),e}()).\u0275fac=function(e){return new(e||C)(S["\u0275\u0275directiveInject"](u.a),S["\u0275\u0275directiveInject"](f.a),S["\u0275\u0275directiveInject"](p.a),S["\u0275\u0275directiveInject"](m.a),S["\u0275\u0275directiveInject"](s.R),S["\u0275\u0275directiveInject"](d.a),S["\u0275\u0275directiveInject"](r.a),S["\u0275\u0275directiveInject"](r.g),S["\u0275\u0275directiveInject"](h.a),S["\u0275\u0275directiveInject"](y.a),S["\u0275\u0275directiveInject"](I.DomSanitizer),S["\u0275\u0275directiveInject"](j.a),S["\u0275\u0275directiveInject"](g.a),S["\u0275\u0275directiveInject"](x.a),S["\u0275\u0275directiveInject"](w.a),S["\u0275\u0275directiveInject"](b.a),S["\u0275\u0275directiveInject"](s.T))},C.\u0275cmp=S["\u0275\u0275defineComponent"]({type:C,selectors:[["app-menu"]],decls:13,vars:2,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],["id","table","border","1","width","100%"],["width","100%",2,"font-weight","400"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[4,"ngIf"]],template:function(e,t){1&e&&(S["\u0275\u0275elementStart"](0,"ion-header"),S["\u0275\u0275elementStart"](1,"ion-toolbar",0),S["\u0275\u0275elementStart"](2,"ion-buttons",1),S["\u0275\u0275element"](3,"ion-back-button",2),S["\u0275\u0275text"](4,"MEALS MENU "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](5,"ion-content"),S["\u0275\u0275elementStart"](6,"table",3),S["\u0275\u0275elementStart"](7,"tr",4),S["\u0275\u0275elementStart"](8,"td"),S["\u0275\u0275elementStart"](9,"b"),S["\u0275\u0275text"](10,"DAYS"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275template"](11,_,3,1,"td",5),S["\u0275\u0275elementEnd"](),S["\u0275\u0275template"](12,k,7,3,"tr",5),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e&&(S["\u0275\u0275advance"](11),S["\u0275\u0275property"]("ngForOf",t.sample_data),S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("ngForOf",t.meal1))},directives:[s.q,s.L,s.g,s.d,s.e,s.l,a.h,a.i],styles:["ion-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:10px}"]}),C);n.d(t,"MenuPageModule",(function(){return T}));var L,P=[{path:"",component:O}],T=((L=function e(){_classCallCheck(this,e)}).\u0275mod=S["\u0275\u0275defineNgModule"]({type:L}),L.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(e){return new(e||L)},imports:[[a.b,i.FormsModule,s.M,o.a,l.a,r.i.forChild(P)]]}),L)}}]);