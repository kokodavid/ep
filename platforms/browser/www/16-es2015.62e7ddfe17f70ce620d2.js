(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{WAHi:function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),r=n("mrSG"),l=n("lGQG"),c=n("wd/R"),d=n("9HCY"),m=n("te5A"),p=n("B7Rs"),f=n("FAH8"),h=n("3LUQ"),u=n("fXoL");function g(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-list"),u["\u0275\u0275element"](1,"br"),u["\u0275\u0275element"](2,"ion-spinner",7),u["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-card"),u["\u0275\u0275elementStart"](1,"ion-card-content"),u["\u0275\u0275text"](2," No feedback... "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-card"),u["\u0275\u0275elementStart"](1,"ion-grid"),u["\u0275\u0275elementStart"](2,"ion-row"),u["\u0275\u0275elementStart"](3,"ion-col",9),u["\u0275\u0275element"](4,"ion-icon",10),u["\u0275\u0275elementStart"](5,"strong"),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"ion-row"),u["\u0275\u0275elementStart"](8,"ion-col",11),u["\u0275\u0275text"](9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"ion-row",12),u["\u0275\u0275listener"]("click",(function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit,o=u["\u0275\u0275nextContext"](2);return o.download(n.student_attachment,o.assets+n.student_attachment)})),u["\u0275\u0275elementStart"](11,"ion-col",13),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"ion-row"),u["\u0275\u0275elementStart"](14,"ion-col",14),u["\u0275\u0275elementStart"](15,"small"),u["\u0275\u0275text"](16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"ion-col",14),u["\u0275\u0275elementStart"](18,"small"),u["\u0275\u0275text"](19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](e.subject),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",e.message," "),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",e.student_attachment," "),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"]("Created On: ",n.formatDate(e.sent_date),""),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("By: ",e.parent_full_name,"")}}function x(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275template"](1,S,20,5,"ion-card",8),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.feedbacks)}}function b(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-fab",15),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().addfeed()})),u["\u0275\u0275elementStart"](1,"ion-fab-button",16),u["\u0275\u0275element"](2,"ion-icon",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}let w=(()=>{class e{constructor(e,t,n,o,i,a,s,r,l){this.authService=e,this.route=t,this.router=n,this.transfer=o,this.file=i,this.fileOpener=a,this.spinnerDialog=s,this.alertService=r,this.loadingController=l,this.items=[],this.spin=0,this.fake=0,setTimeout(()=>{this.fake=0},3e3),this.feedbacks=new Array;const c=localStorage.getItem("token"),d=JSON.parse(c);this.data=d,this.school=this.data.students[0].school,console.log(this.school),this.assets=`http://cdn2.eduweb.co.ke/homework_attachments/${this.school}/documents/`,console.log(this.assets)}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield localStorage.getItem("token"),t=JSON.parse(e);this.data=t,this.school=this.data.students[0].school}))}ionViewWillEnter(){return Object(r.a)(this,void 0,void 0,(function*(){this.authService.presentLoading(),this.spin=1,yield this.authService.checkFeed().then(e=>{this.spin=0,this.feedback=e}),yield this.authService.news().subscribe(e=>{this.spin=0,this.authService.dismiss(),console.log(e),this.data=e,this.feedbacks=this.data.data.feedback[this.school],console.log(this.feedbacks)})}))}addfeed(){this.router.navigate(["feedback"],{})}getMIMEtype(e){return{txt:"text/plain",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",doc:"application/msword",pdf:"application/pdf",jpg:"image/jpeg",bmp:"image/bmp",png:"image/png",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",rtf:"application/rtf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",flv:"video/x-flv",mp4:"video/mp4",m3u8:"application/x-mpegURL",ts:"video/MP2T","3gp":"video/3gpp",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv"}[e.toLowerCase()]}open(e){this.authService.dismiss();const t=e.split(".").reverse()[0],n=this.getMIMEtype(t);console.log(t,n,e),this.fileOpener.showOpenWithDialog(e,n).then(()=>console.log("File is opened")).catch(e=>{this.alertService.presentToast(e)})}download(e,t){return Object(r.a)(this,void 0,void 0,(function*(){if(e.includes("mp4")){const n=t.replace("/documents/","/videos/");yield this.authService.presentLoading();const o=encodeURI(n);console.log(n),this.fileTransfer=this.transfer.create(),this.fileTransfer.download(o,this.file.dataDirectory+e,!0).then(e=>{console.log("download completed: "+e.toURL()),this.open(e.toURL())}).catch(e=>{this.authService.dismiss(),this.alertService.presentToast("error"+JSON.stringify(e)),console.log("download failed: "+JSON.stringify(e))})}else{yield this.authService.presentLoading();const n=encodeURI(t);console.log(t),this.fileTransfer=this.transfer.create(),this.fileTransfer.download(n,this.file.dataDirectory+e,!0).then(e=>{console.log("download completed: "+e.toURL()),this.open(e.toURL())}).catch(e=>{this.authService.dismiss(),this.alertService.presentToast("error"+JSON.stringify(e)),console.log("download failed: "+JSON.stringify(e))})}}))}formatDate(e){return c(e).format("MMM D, YYYY")}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](l.a),u["\u0275\u0275directiveInject"](s.a),u["\u0275\u0275directiveInject"](s.g),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](f.a),u["\u0275\u0275directiveInject"](m.a),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](a.O))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-list"]],decls:11,vars:4,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],["slot","start","size","30","name","notifications",2,"font-size","1.6em","margin-top","5px !important"],[1,"ion-no-padding"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click",4,"ngIf"],["name","lines-small","color","primary",2,"text-align","center","margin-left","50%","margin-right","50%"],[4,"ngFor","ngForOf"],["col-12","",2,"font-weight","bold","font-size","12px","color","#009e0f","text-transform","uppercase"],["name","notifications"],["col-12","",2,"font-size","13px","color","black"],[3,"click"],["col-12","",2,"font-size","13px","color","blue"],["col-6","",2,"font-weight","500"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","tertiary"],["name","chatbox-ellipses"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-header"),u["\u0275\u0275elementStart"](1,"ion-toolbar",0),u["\u0275\u0275elementStart"](2,"ion-buttons",1),u["\u0275\u0275element"](3,"ion-back-button",2),u["\u0275\u0275element"](4,"ion-icon",3),u["\u0275\u0275text"](5,"FEEDBACK "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"ion-content",4),u["\u0275\u0275template"](7,g,3,0,"ion-list",5),u["\u0275\u0275template"](8,v,3,0,"ion-card",5),u["\u0275\u0275template"](9,x,2,1,"div",5),u["\u0275\u0275template"](10,b,3,0,"ion-fab",6),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngIf",0===t.feedbacks.length&&1===t.fake),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",0===t.feedbacks.length&&0===t.fake),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.feedbacks.length>0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","true"===t.feedback))},directives:[a.q,a.L,a.g,a.d,a.e,a.r,a.l,o.i,a.v,a.H,a.h,a.i,o.h,a.p,a.B,a.k,a.n,a.o],styles:[""]}),e})();n.d(t,"ListPageModule",(function(){return k}));let k=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.b,i.FormsModule,a.M,s.i.forChild([{path:"",component:w}])]]}),e})()}}]);