(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{QiYe:function(e,t,a){"use strict";a.r(t);var s=a("ofXK"),r=a("3Pt+"),n=a("tyNb"),i=a("TEn/"),l=a("mrSG"),o=a("lGQG"),h=a("wd/R"),d=a("IfdK"),c=a("MO+k"),m=a("xG9w"),p=a("fXoL");const u=["barChart"],b=["lineChart"];function f(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-title"),p["\u0275\u0275text"](1,"Overall performance analysis"),p["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&p["\u0275\u0275element"](0,"canvas",6,7)}function _(e,t){1&e&&p["\u0275\u0275element"](0,"canvas",8,9)}let v=(()=>{class e{constructor(e,t,a){this.modalCtl=e,this.navParams=t,this.authService=a}ngOnInit(){"overall"===this.navParams.get("type")?(this.chartype=1,this.labels=this.navParams.get("reports"),setTimeout(()=>{this.authService.dismiss(),this.overallChart()},2e3)):(this.authService.presentLoading(),setTimeout(()=>{this.authService.dismiss(),this.createChart()},2e3))}createChart(){let e;e=new Array,this.exam_marks=new Array,e=this.navParams.get("reports"),this.name=e.class_name,this.term=e.term_name,this.exam_marks=void 0===e.exam_marks?[]:e.exam_marks,console.log(e),this.terms=[],this.type=[];let t=[];for(var a=0;a<e.exam_marks.length;a++)t.push(e.exam_marks[a].exam_type);var s=[];for(let l=0;l<this.exam_marks.length;l++)for(let e=0;e<this.exam_marks[l].exam_marks.length;e++)null!==this.exam_marks[l].exam_marks[e].mark&&s.push(this.exam_marks[l].exam_type);t=s.filter(this.onlyUnique),console.log(t),this.math=[],this.english=[],this.kiswahili=[],this.science=[],this.ssre=[];for(var r=0;r<this.exam_marks.length;r++){let e;e=m.a(this.exam_marks[r].exam_marks,"subject_name"),e=e.filter(e=>null==e.parent_subject_id),this.math.push(e[0].mark),this.english.push(e[1].mark),this.kiswahili.push(e[2].mark),this.science.push(e[3].mark),this.ssre.push(e[4].mark)}let n=[];for(var i=0;i<this.exam_marks[0].exam_marks.length;i++){let e;e=m.a(this.exam_marks[0].exam_marks,"subject_name"),null==e[i].parent_subject_id&&n.push(e[i].subject_name)}null==this.terms&&null==this.terms||(this.math=this.math.filter(e=>null!=e),this.english=this.english.filter(e=>null!=e),this.kiswahili=this.kiswahili.filter(e=>null!=e),this.science=this.science.filter(e=>null!=e),this.ssre=this.ssre.filter(e=>null!=e),this.bars=new c.Chart(this.barChart.nativeElement,{type:"bar",data:{labels:t,datasets:[{label:n[0],data:this.math,fill:!0,borderWidth:2,backgroundColor:"orange"},{label:n[1],data:this.english,borderWidth:2,fill:!0,backgroundColor:"black"},{label:n[2],data:this.kiswahili,borderWidth:2,backgroundColor:"blue",fill:!0},{label:n[3],data:this.science,borderWidth:2,backgroundColor:"red",fill:!0},{label:n[4],data:this.ssre,borderWidth:2,backgroundColor:"green",fill:!0}]},options:{title:{display:!0,text:"Analysis for "+e.class_name+" "+e.term_name},maintainAspectRatio:!1,legend:{display:!0,position:"bottom"},gridLines:{display:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"EXAM MARKS",fontStyle:"bold"},ticks:{beginAtZero:!0,suggestedMax:100}}],xAxes:[{scaleLabel:{display:!0,labelString:"EXAM TYPE",fontStyle:"bold"},ticks:{}}]}}}))}overallChart(){let e=[],t=[];this.labels=this.labels;for(let s=0;s<this.labels.length;s++)if(e.push(this.labels[s].overall_marks_and_grade[0].this_term_marks_and_grade[0].overall_mark.substr(0,3)),this.labels[s].term_name.length>10)this.labels[s].term_name.includes("ONE")?(a=this.labels[s].term_name.replace("ONE","1"),t.push(a)):this.labels[s].term_name.includes("TWO")?(a=this.labels[s].term_name.replace("TWO","2"),t.push(a)):this.labels[s].term_name.includes("THREE")?(a=this.labels[s].term_name.replace("THREE","3"),t.push(a)):t.push(this.labels[s].term_name);else if(this.labels[s].term_name.includes("ONE"))a=this.labels[s].term_name.replace("ONE","1"),t.push(a+" "+this.labels[s].year);else if(this.labels[s].term_name.includes("TWO"))a=this.labels[s].term_name.replace("TWO","2"),t.push(a+" "+this.labels[s].year);else if(this.labels[s].term_name.includes("THREE")){var a;a=this.labels[s].term_name.replace("THREE","3"),t.push(a+" "+this.labels[s].year)}else t.push(this.labels[s].term_name+" "+this.labels[s].year);console.log(e),console.log(t),this.str_lines=new c.Chart(this.ovChart.nativeElement,{type:"line",data:{labels:t,datasets:[{label:"OVERALL MARKS",data:e,fill:!0,borderWidth:2,backgroundColor:"rgba(57,124,73,0.3)",borderColor:"#397C49"}]},options:{title:{display:!1,text:"Overall performance"},maintainAspectRatio:!1,legend:{display:!0,position:"top"},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"OVERALL MARKS",fontStyle:"bold"},ticks:{display:!0,beginAtZero:!0,suggestedMax:500,stepSize:100}}],xAxes:[{scaleLabel:{display:!0,labelString:"TERMS",fontStyle:"bold"},ticks:{display:!0}}]}}})}onlyUnique(e,t,a){return a.indexOf(e)===t}dismisModal(){this.modalCtl.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](i.Q),p["\u0275\u0275directiveInject"](i.S),p["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-analytics-modal"]],viewQuery:function(e,t){var a;1&e&&(p["\u0275\u0275viewQuery"](u,!0),p["\u0275\u0275viewQuery"](b,!0)),2&e&&(p["\u0275\u0275queryRefresh"](a=p["\u0275\u0275loadQuery"]())&&(t.barChart=a.first),p["\u0275\u0275queryRefresh"](a=p["\u0275\u0275loadQuery"]())&&(t.ovChart=a.first))},decls:11,vars:5,consts:[[4,"ngIf"],["slot","end"],["slot","end",3,"click"],["name","close-circle"],["style","width: 250px;",4,"ngIf"],["style","height: 250px;",4,"ngIf"],[2,"width","250px"],["barChart",""],[2,"height","250px"],["lineChart",""]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header"),p["\u0275\u0275elementStart"](1,"ion-toolbar"),p["\u0275\u0275elementStart"](2,"ion-title"),p["\u0275\u0275text"](3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,f,2,0,"ion-title",0),p["\u0275\u0275elementStart"](5,"ion-buttons",1),p["\u0275\u0275elementStart"](6,"ion-button",2),p["\u0275\u0275listener"]("click",(function(){return t.dismisModal()})),p["\u0275\u0275element"](7,"ion-icon",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"ion-content"),p["\u0275\u0275template"](9,g,2,0,"canvas",4),p["\u0275\u0275template"](10,_,2,0,"canvas",5),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate2"]("",t.name," ",t.term," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",1===t.chartype),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngIf",1!==t.chartype),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",1===t.chartype))},directives:[i.q,i.L,i.K,s.i,i.g,i.f,i.r,i.l],styles:[""]}),e})();const y=["lineChart"],x=["lineChart2"],k=["lineChart3"],C=["overallChart"];function S(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"ion-avatar",9),p["\u0275\u0275element"](1,"img",10),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("src",e.assets,p["\u0275\u0275sanitizeUrl"])}}function E(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-avatar",9),p["\u0275\u0275element"](1,"ion-icon",11),p["\u0275\u0275elementEnd"]())}function w(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",12),p["\u0275\u0275elementStart"](1,"ion-item",13),p["\u0275\u0275text"](2,"No analytic information for this student."),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"ion-select-option",31),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("value",e),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](e)}}function M(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"ion-select-option",31),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("value",e.term_id),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](e.term_name)}}function I(e,t){1&e&&p["\u0275\u0275element"](0,"canvas",37,38)}function A(e,t){1&e&&p["\u0275\u0275element"](0,"canvas",17,39)}function j(e,t){1&e&&p["\u0275\u0275element"](0,"canvas",17,40)}function W(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-col",32),p["\u0275\u0275elementStart"](1,"div",18),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const a=t.$implicit;return p["\u0275\u0275nextContext"](2).openModal(a)})),p["\u0275\u0275elementStart"](2,"ion-card",33),p["\u0275\u0275template"](3,I,2,0,"canvas",34),p["\u0275\u0275template"](4,A,2,0,"canvas",35),p["\u0275\u0275template"](5,j,2,0,"canvas",35),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"p",36),p["\u0275\u0275elementStart"](7,"strong"),p["\u0275\u0275text"](8),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,a=t.index;p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",0==a),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",1==a),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",2==a),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](e.term_name)}}function P(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275element"](1,"ion-icon",14,15),p["\u0275\u0275elementStart"](3,"i",16),p["\u0275\u0275text"](4,"Click on card to view detailed analysis"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"h5"),p["\u0275\u0275text"](6,"Overall performance"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"ion-card",17),p["\u0275\u0275elementStart"](8,"canvas",18,19),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().ovModal()})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](10,"ion-list"),p["\u0275\u0275elementStart"](11,"h5",20),p["\u0275\u0275text"](12,"Subject performance"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"ion-list-header"),p["\u0275\u0275elementStart"](14,"ion-button",21),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().hide()})),p["\u0275\u0275text"](15,"Filter "),p["\u0275\u0275element"](16,"ion-icon",22),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"div",23),p["\u0275\u0275elementStart"](18,"ion-item"),p["\u0275\u0275elementStart"](19,"ion-label"),p["\u0275\u0275text"](20,"Class"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](21,"ion-select",24),p["\u0275\u0275listener"]("ionChange",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().classChange(t)})),p["\u0275\u0275elementStart"](22,"ion-select-option",25),p["\u0275\u0275text"](23,"All"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](24,O,3,2,"div",26),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](25,"ion-item"),p["\u0275\u0275elementStart"](26,"ion-label"),p["\u0275\u0275text"](27,"Term"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](28,"ion-select",27),p["\u0275\u0275listener"]("ionChange",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().termChange(t)})),p["\u0275\u0275template"](29,M,3,2,"div",26),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](30,"ion-item",13),p["\u0275\u0275elementStart"](31,"ion-button",28),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().filter()})),p["\u0275\u0275text"](32,"Filter"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](33,"ion-grid",29),p["\u0275\u0275elementStart"](34,"ion-row"),p["\u0275\u0275template"](35,W,9,4,"ion-col",30),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](24),p["\u0275\u0275property"]("ngForOf",e.class_history),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngForOf",e.terms),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("ngForOf",e.report_cards)}}let T=(()=>{class e{constructor(e,t,a,s,r){this.authService=e,this.route=t,this.router=a,this.session=s,this.modalCtl=r,this.data=new Array,this.student=new Array,this.terms=[],this.segment="overall",this.marks=[],this.fake=0,this.hidden=!0,this.report_cards=new Array,this.class_history=new Array,this.exam_marks=new Array,this.route.queryParams.subscribe(e=>{this.router.getCurrentNavigation().extras.state&&(this.student=this.router.getCurrentNavigation().extras.state.details,this.assets=null===this.student.student_image?1:`https://${this.student.school}.eduweb.co.ke/assets/students/${this.student.student_image}`)}),this.options={title:{display:!1,text:"Analysis for "},legend:{display:!1},maintainAspectRatio:!1,responive:!0,scales:{yAxes:[{scaleLabel:{display:!1,labelString:"EXAM MARKS",fontStyle:"bold"},ticks:{display:!1,beginAtZero:!0,suggestedMax:100,stepSize:25},gridLines:{display:!0,lineWidth:1}}],xAxes:[{scaleLabel:{display:!1,labelString:"EXAM TYPE",fontStyle:"bold"},ticks:{display:!1},gridLines:{display:!0,lineWidth:1}}]}}}ngOnInit(){this.authService.presentLoading()}ionViewWillEnter(){return Object(l.a)(this,void 0,void 0,(function*(){yield this.authService.cards(this.student.school,this.student.student_id).subscribe(e=>{this.data=e,this.labels=m.a(this.data.data,"term_id");for(var t=[],a=0;a<this.labels.length;a++)t=this.labels[a].exam_marks;null==this.labels||0===this.labels.length||null===t?(this.nodata="true",this.authService.dismiss()):(this.nodata="false",this.report_cards=this.labels.reverse(),console.log(this.report_cards),"2020"===this.report_cards[0].year?(this.sort=1,this.report_cards=this.report_cards.filter(e=>"2020"==e.year)):"2019"===this.report_cards[0].year?(this.sort=0,this.report_cards=this.report_cards.filter(e=>"2019"==e.year)):"2018"===this.report_cards[0].year?(this.sort=0,this.report_cards=this.report_cards.filter(e=>"2018"==e.year)):(this.nodata="true",this.authService.dismiss()),this.authService.dismiss(),this.pos=-1,setTimeout(()=>{this.overallChart(),this.createChart(this.pos)},2e3))}),yield this.authService.schoolTerm(this.student.school,this.student.student_id).subscribe(e=>{this.data=e,this.terms=this.data.data,this.class_history=this.terms.map(e=>e.class_name).filter((e,t,a)=>a.indexOf(e)===t)})}))}reportData(e){this.router.navigate(["analysis"],{state:{details:this.student,reports:e}})}hide(){1==this.hidden?(document.getElementById("hid").hidden=!1,this.hidden=!1):(document.getElementById("hid").hidden=!0,this.hidden=!0,this.report_cards=this.labels.reverse(),"2020"===this.report_cards[0].year?(this.sort=1,this.report_cards=this.report_cards.filter(e=>"2020"==e.year)):(this.sort=0,this.report_cards=this.report_cards.filter(e=>"2019"==e.year)),setTimeout(()=>{this.pos=-1,this.createChart(this.pos)},2e3))}classChange(e){this.c_id=e.target.value,"all"===this.c_id?this.terms=this.data.data:(this.terms=this.data.data,this.terms=this.terms.filter(e=>{let t=[];return t=e.class_name,t==this.c_id})),console.log(this.terms)}termChange(e){this.t_id=e.target.value}filter(){let e;this.report_cards=void 0===this.data.data?[]:this.data.data,e=this.report_cards.filter(e=>e.term_id==this.t_id),console.log(e[0]),this.pos=this.report_cards.indexOf(e[0]),console.log(this.pos),this.report_cards=this.report_cards.filter(e=>e.term_id==this.t_id),setTimeout(()=>{this.createChart(this.pos)},2e3)}createChart(e){if(console.log(e),-1!=e){let e=this.report_cards[0].exam_marks,s=[];for(let t=0;t<e.length;t++)s.push(e[t].exam_type);console.log(s),this.math=[],this.english=[],this.kiswahli=[],this.science=[],this.ssre=[];for(var t=0;t<e.length;t++){let a;a=m.a(e[t].exam_marks,"subject_name"),a=a.filter(e=>null==e.parent_subject_id),this.math.push(a[0].mark),this.english.push(a[1].mark),this.kiswahli.push(a[2].mark),this.science.push(a[3].mark),this.ssre.push(a[4].mark)}let r=[];for(var a=0;a<e[0].exam_marks.length;a++){let t;t=m.a(e[0].exam_marks,"subject_name"),null==t[a].parent_subject_id&&r.push(t[a].subject_name)}this.bars=new c.Chart(this.lineChart.nativeElement,{type:"bar",data:{labels:s,datasets:[{label:r[0],data:this.math,fill:!1,borderWidth:.5,borderColor:"orange"},{label:r[1],data:this.english,borderWidth:.5,fill:!1,borderColor:"black"},{label:r[2],data:this.kiswahli,borderWidth:.5,borderColor:"blue",fill:!1},{label:r[3],data:this.science,borderWidth:.5,borderColor:"red",fill:!1},{label:r[4],data:this.ssre,borderWidth:.5,borderColor:"green",fill:!1}]},options:this.options})}else{for(t=0;t<this.report_cards.length;t++)this.exam_marks.push(this.report_cards[t].exam_marks);let e=this.exam_marks[0],f=this.exam_marks[1],g=this.exam_marks[2];console.log(e[0].exam_marks);let _=[];for(a=0;a<e[0].exam_marks.length;a++){let t;t=m.a(e[0].exam_marks,"subject_name"),null==t[a].parent_subject_id&&_.push(t[a].subject_name)}this.terms=[];let v,y=[],x=[],k=[];for(var s=0;s<e.length;s++)y.push(e[s].exam_type);this.math=[],this.english=[],this.kiswahli=[],this.science=[],this.ssre=[];for(let t=0;t<e.length;t++)v=m.a(e[t].exam_marks,"subject_name"),v=v.filter(e=>null==e.parent_subject_id),this.math.push(v[0].mark),this.english.push(v[1].mark),this.kiswahli.push(v[2].mark),this.science.push(v[3].mark),this.ssre.push(v[4].mark);this.bars=new c.Chart(this.lineChart.nativeElement,{type:"bar",data:{labels:y,datasets:[{label:_[0],data:this.math,fill:!1,borderWidth:.5,borderColor:"orange"},{label:_[1],data:this.english,borderWidth:.5,fill:!1,borderColor:"black"},{label:_[2],data:this.kiswahli,borderWidth:.5,borderColor:"blue",fill:!1},{label:_[3],data:this.science,borderWidth:.5,borderColor:"red",fill:!1},{label:_[4],data:this.ssre,borderWidth:.5,borderColor:"green",fill:!1}]},options:this.options});{for(let t=0;t<f.length;t++)x.push(f[t].exam_type);if(void 0!==g)for(let t=0;t<g.length;t++)k.push(g[t].exam_type);var r=[],n=[],i=[],l=[],o=[];let e;for(t=0;t<f.length;t++)e=m.a(f[t].exam_marks,"subject_name"),e=e.filter(e=>null==e.parent_subject_id),r.push(e[0].mark),n.push(e[1].mark),i.push(e[2].mark),l.push(e[3].mark),o.push(e[4].mark);var h=[],d=[],p=[],u=[],b=[];if(void 0!==g)for(t=0;t<g.length;t++){let e;e=m.a(g[t].exam_marks,"subject_name"),e=e.filter(e=>null==e.parent_subject_id),h.push(e[0].mark),d.push(e[1].mark),p.push(e[2].mark),u.push(e[3].mark),b.push(e[4].mark)}r=r.filter(e=>null!=e),n=n.filter(e=>null!=e),i=i.filter(e=>null!=e),l=l.filter(e=>null!=e),o=o.filter(e=>null!=e),this.lines=new c.Chart(this.lineChart2.nativeElement,{type:"bar",data:{labels:x,datasets:[{label:_[0],data:r,fill:!1,borderWidth:.5,borderColor:"orange"},{label:_[1],data:n,borderWidth:.5,fill:!1,borderColor:"black"},{label:_[2],data:i,borderWidth:.5,borderColor:"blue",fill:!1},{label:_[3],data:l,borderWidth:.5,borderColor:"red",fill:!1},{label:_[4],data:o,borderWidth:.5,borderColor:"green",fill:!1}]},options:this.options}),this.pies=new c.Chart(this.lineChart3.nativeElement,{type:"bar",data:{labels:k,datasets:[{label:_[0],data:h,fill:!1,borderWidth:.5,borderColor:"orange"},{label:_[1],data:d,borderWidth:.5,fill:!1,borderColor:"black"},{label:_[2],data:p,borderWidth:.5,borderColor:"blue",fill:!1},{label:_[3],data:u,borderWidth:.5,borderColor:"red",fill:!1},{label:_[4],data:b,borderWidth:.5,borderColor:"green",fill:!1}]},options:this.options})}}}overallChart(){let e=[],t=[];this.labels=m.a(this.labels,"term_id");for(let a=0;a<this.labels.length;a++)e.push(this.labels[a].overall_marks_and_grade[0].this_term_marks_and_grade[0].overall_mark.substr(0,3)),t.push(this.labels[a].term_name);console.log(e),console.log(t),this.str_lines=new c.Chart(this.ovChart.nativeElement,{type:"line",data:{labels:t,datasets:[{label:"Overall Marks",data:e,fill:!0,borderWidth:2,backgroundColor:"rgba(57,124,73,0.3)",borderColor:"#397C49"}]},options:{maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!1,labelString:"Ov MARKS",fontStyle:"bold"},ticks:{display:!0,beginAtZero:!0,suggestedMax:500,stepSize:250}}],xAxes:[{scaleLabel:{display:!0,labelString:"TERMS",fontStyle:"bold"},ticks:{display:!1}}]}}})}openModal(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtl.create({component:v,cssClass:"modal-css",componentProps:{reports:e}});yield t.present()}))}ovModal(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this.modalCtl.create({component:v,cssClass:"modal-css",componentProps:{reports:this.labels,type:"overall"}});yield e.present()}))}onlyUnique(e,t,a){return a.indexOf(e)===t}format(e){return h(e).format("DD-MM-YYYY")}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](o.a),p["\u0275\u0275directiveInject"](n.a),p["\u0275\u0275directiveInject"](n.g),p["\u0275\u0275directiveInject"](d.a),p["\u0275\u0275directiveInject"](i.Q))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-analytics"]],viewQuery:function(e,t){var a;1&e&&(p["\u0275\u0275viewQuery"](y,!0),p["\u0275\u0275viewQuery"](x,!0),p["\u0275\u0275viewQuery"](k,!0),p["\u0275\u0275viewQuery"](C,!0)),2&e&&(p["\u0275\u0275queryRefresh"](a=p["\u0275\u0275loadQuery"]())&&(t.lineChart=a.first),p["\u0275\u0275queryRefresh"](a=p["\u0275\u0275loadQuery"]())&&(t.lineChart2=a.first),p["\u0275\u0275queryRefresh"](a=p["\u0275\u0275loadQuery"]())&&(t.lineChart3=a.first),p["\u0275\u0275queryRefresh"](a=p["\u0275\u0275loadQuery"]())&&(t.ovChart=a.first))},decls:13,vars:7,consts:[["color","primary"],["slot","start",2,"font-size","14px"],["text","","icon","chevron-back"],[2,"--background","none"],["slot","start",4,"ngIf"],[2,"text-transform","uppercase"],[1,"ion-padding"],["class","vertical-center",4,"ngIf"],[4,"ngIf"],["slot","start"],[3,"src"],["size","32","name","happy-outline",2,"font-size","2em"],[1,"vertical-center"],["lines","none"],["size","medium","name","information-circle",2,"padding-top","10px","color","#397C49"],["helper",""],[2,"color","#397C49"],[2,"height","180px"],[3,"click"],["overallChart",""],[2,"margin-bottom","-5px"],["size","small",2,"color","black",3,"click"],["name","chevron-down"],["id","hid","hidden","",2,"padding-left","8px","padding-right","8px"],["id","class","cancelText","Cancel","okText","Ok",3,"ionChange"],["value","all"],[4,"ngFor","ngForOf"],["cancelText","Cancel","okText","Ok",3,"ionChange"],["slot","end","color","dark",3,"click"],[1,"grid_graphs"],["size","6","style","margin: -5px;",4,"ngFor","ngForOf"],[3,"value"],["size","6",2,"margin","-5px"],["tooltip","Okay lets see","positionV","bottom"],["style","height: 180px; width: 200px;",4,"ngIf"],["style","height: 180px;",4,"ngIf"],[2,"text-align","center"],[2,"height","180px","width","200px"],["lineChart",""],["lineChart2",""],["lineChart3",""]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header"),p["\u0275\u0275elementStart"](1,"ion-toolbar",0),p["\u0275\u0275elementStart"](2,"ion-buttons",1),p["\u0275\u0275element"](3,"ion-back-button",2),p["\u0275\u0275text"](4,"ANALYTICS "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-item",3),p["\u0275\u0275template"](6,S,2,1,"ion-avatar",4),p["\u0275\u0275template"](7,E,2,0,"ion-avatar",4),p["\u0275\u0275elementStart"](8,"ion-label",5),p["\u0275\u0275text"](9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](10,"ion-content",6),p["\u0275\u0275template"](11,w,3,0,"div",7),p["\u0275\u0275template"](12,P,36,3,"div",8),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("ngIf",1!==t.assets),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",1===t.assets),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate3"]("",t.student.first_name," ",t.student.middle_name," ",t.student.last_name," "),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf","true"===t.nodata),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.report_cards.length>0))},directives:[i.q,i.L,i.g,i.d,i.e,i.t,s.i,i.u,i.l,i.c,i.r,i.h,i.v,i.w,i.f,i.E,i.V,i.F,s.h,i.p,i.B,i.k],styles:["ion-segment[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-transform:unset;color:#fff;font-size:12px}ion-content[_ngcontent-%COMP%]{font-size:12px;--ion-background-color:#dddede}ion-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{color:#000;font-size:12px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{--background:none}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--ion-background-color:#fff;padding:8px}ion-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#000;font-size:12px}#class[_ngcontent-%COMP%]{max-width:65%!important}ion-select[_ngcontent-%COMP%]{width:100%;justify-content:center}.center[_ngcontent-%COMP%]{text-align:right}.grid_graphs[_ngcontent-%COMP%]{margin:-8px}ion-item[_ngcontent-%COMP%]{--border-color:#fff}"]}),e})();a.d(t,"AnalyticsPageModule",(function(){return L}));const R=[{path:"",component:T}];let L=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.b,r.FormsModule,i.M,n.i.forChild(R)]]}),e})()}}]);